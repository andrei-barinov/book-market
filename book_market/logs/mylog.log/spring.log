2021-04-22 05:57:15.873  INFO 4004 --- [main] r.g.book.market.BookMarketApplication    : Starting BookMarketApplication using Java 15.0.1 on PC with PID 4004 (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes started by Андрей in C:\Users\Андрей\Desktop\Java HW\book_market)
2021-04-22 05:57:15.873  INFO 4004 --- [main] r.g.book.market.BookMarketApplication    : No active profile set, falling back to default profiles: default
2021-04-22 05:57:16.252  INFO 4004 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2021-04-22 05:57:16.252  INFO 4004 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 3 ms. Found 0 JPA repository interfaces.
2021-04-22 05:57:16.564  INFO 4004 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8189 (http)
2021-04-22 05:57:16.580  INFO 4004 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2021-04-22 05:57:16.580  INFO 4004 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.45]
2021-04-22 05:57:16.658  INFO 4004 --- [main] o.a.c.c.C.[.[localhost].[/book_market]   : Initializing Spring embedded WebApplicationContext
2021-04-22 05:57:16.658  INFO 4004 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 758 ms
2021-04-22 05:57:16.736  INFO 4004 --- [main] o.f.c.internal.license.VersionPrinter    : Flyway Community Edition 7.1.1 by Redgate
2021-04-22 05:57:16.736  INFO 4004 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2021-04-22 05:57:16.845  INFO 4004 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2021-04-22 05:57:16.861  INFO 4004 --- [main] o.f.c.i.database.base.DatabaseType       : Database: jdbc:postgresql://localhost:5432/db_book_market (PostgreSQL 13.2)
2021-04-22 05:57:16.923  WARN 4004 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.flywaydb.core.api.exception.FlywayValidateException: Validate failed: Migrations have failed validation
2021-04-22 05:57:16.923  INFO 4004 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2021-04-22 05:57:16.923  INFO 4004 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2021-04-22 05:57:16.923  INFO 4004 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2021-04-22 05:57:16.923  INFO 4004 --- [main] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2021-04-22 05:57:16.939 ERROR 4004 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.flywaydb.core.api.exception.FlywayValidateException: Validate failed: Migrations have failed validation
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:602) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:524) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-5.3.6.jar:5.3.6]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908) ~[spring-context-5.3.6.jar:5.3.6]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.6.jar:5.3.6]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:144) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:782) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:774) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:339) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1340) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1329) ~[spring-boot-2.4.5.jar:2.4.5]
	at ru.geekbrains.book.market.BookMarketApplication.main(BookMarketApplication.java:10) ~[classes/:na]
Caused by: org.flywaydb.core.api.exception.FlywayValidateException: Validate failed: Migrations have failed validation
	at org.flywaydb.core.Flyway$1.execute(Flyway.java:172) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway$1.execute(Flyway.java:164) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway.execute(Flyway.java:538) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway.migrate(Flyway.java:164) ~[flyway-core-7.1.1.jar:na]
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66) ~[spring-boot-autoconfigure-2.4.5.jar:2.4.5]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1845) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-5.3.6.jar:5.3.6]
	... 19 common frames omitted

2021-04-22 05:58:21.684  INFO 9308 --- [main] r.g.book.market.BookMarketApplication    : Starting BookMarketApplication using Java 15.0.1 on PC with PID 9308 (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes started by Андрей in C:\Users\Андрей\Desktop\Java HW\book_market)
2021-04-22 05:58:21.684  INFO 9308 --- [main] r.g.book.market.BookMarketApplication    : No active profile set, falling back to default profiles: default
2021-04-22 05:58:22.014  INFO 9308 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2021-04-22 05:58:22.014  INFO 9308 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2021-04-22 05:58:22.279  INFO 9308 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8189 (http)
2021-04-22 05:58:22.279  INFO 9308 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2021-04-22 05:58:22.279  INFO 9308 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.45]
2021-04-22 05:58:22.364  INFO 9308 --- [main] o.a.c.c.C.[.[localhost].[/book_market]   : Initializing Spring embedded WebApplicationContext
2021-04-22 05:58:22.364  INFO 9308 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 645 ms
2021-04-22 05:58:22.426  INFO 9308 --- [main] o.f.c.internal.license.VersionPrinter    : Flyway Community Edition 7.1.1 by Redgate
2021-04-22 05:58:22.426  INFO 9308 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2021-04-22 05:58:22.489  INFO 9308 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2021-04-22 05:58:22.489  INFO 9308 --- [main] o.f.c.i.database.base.DatabaseType       : Database: jdbc:postgresql://localhost:5432/db_book_market (PostgreSQL 13.2)
2021-04-22 05:58:22.505  INFO 9308 --- [main] o.f.core.internal.database.base.Schema   : Creating schema "book_market" ...
2021-04-22 05:58:22.520  INFO 9308 --- [main] o.f.c.i.s.JdbcTableSchemaHistory         : Creating Schema History table "book_market"."flyway_schema_history" ...
2021-04-22 05:58:22.551  INFO 9308 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema "book_market": null
2021-04-22 05:58:22.567  INFO 9308 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "book_market" to version "1 - create"
2021-04-22 05:58:22.567  INFO 9308 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "role" не существует, пропускается
2021-04-22 05:58:22.567  INFO 9308 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "address" не существует, пропускается
2021-04-22 05:58:22.598 ERROR 9308 --- [main] o.f.core.internal.command.DbMigrate      : Migration of schema "book_market" to version "1 - create" failed! Changes successfully rolled back.
2021-04-22 05:58:22.598  WARN 9308 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V1__create.sql failed
-------------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: ошибка синтаксиса (примерное положение: "user")
  Позиция: 22
Location   : db/migration/V1__create.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V1__create.sql)
Line       : 19
Statement  : drop table if exists user cascade

2021-04-22 05:58:22.598  INFO 9308 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2021-04-22 05:58:22.614  INFO 9308 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2021-04-22 05:58:22.614  INFO 9308 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2021-04-22 05:58:22.630  INFO 9308 --- [main] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2021-04-22 05:58:22.645 ERROR 9308 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V1__create.sql failed
-------------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: ошибка синтаксиса (примерное положение: "user")
  Позиция: 22
Location   : db/migration/V1__create.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V1__create.sql)
Line       : 19
Statement  : drop table if exists user cascade

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:602) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:524) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-5.3.6.jar:5.3.6]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908) ~[spring-context-5.3.6.jar:5.3.6]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.6.jar:5.3.6]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:144) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:782) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:774) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:339) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1340) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1329) ~[spring-boot-2.4.5.jar:2.4.5]
	at ru.geekbrains.book.market.BookMarketApplication.main(BookMarketApplication.java:10) ~[classes/:na]
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V1__create.sql failed
-------------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: ошибка синтаксиса (примерное положение: "user")
  Позиция: 22
Location   : db/migration/V1__create.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V1__create.sql)
Line       : 19
Statement  : drop table if exists user cascade

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:438) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.access$200(DbMigrate.java:56) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate$3.call(DbMigrate.java:341) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:66) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:338) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:303) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.access$100(DbMigrate.java:56) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate$2.call(DbMigrate.java:207) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate$2.call(DbMigrate.java:204) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:73) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLConnection.lock(PostgreSQLConnection.java:99) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:139) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:204) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:165) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway$1.execute(Flyway.java:215) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway$1.execute(Flyway.java:164) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway.execute(Flyway.java:538) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway.migrate(Flyway.java:164) ~[flyway-core-7.1.1.jar:na]
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66) ~[spring-boot-autoconfigure-2.4.5.jar:2.4.5]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1845) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-5.3.6.jar:5.3.6]
	... 19 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: 
Migration V1__create.sql failed
-------------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: ошибка синтаксиса (примерное положение: "user")
  Позиция: 22
Location   : db/migration/V1__create.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V1__create.sql)
Line       : 19
Statement  : drop table if exists user cascade

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:273) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:218) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:82) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.access$000(SqlMigrationExecutor.java:32) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor$1.call(SqlMigrationExecutor.java:70) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor$1.call(SqlMigrationExecutor.java:67) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:28) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:67) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:434) ~[flyway-core-7.1.1.jar:na]
	... 39 common frames omitted
Caused by: org.postgresql.util.PSQLException: ОШИБКА: ошибка синтаксиса (примерное положение: "user")
  Позиция: 22
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2553) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2285) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:323) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:481) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:401) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:322) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:308) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:284) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:279) ~[postgresql-42.2.19.jar:42.2.19]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95) ~[HikariCP-3.4.5.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-3.4.5.jar:na]
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:241) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:111) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:206) ~[flyway-core-7.1.1.jar:na]
	... 47 common frames omitted

2021-04-22 05:59:53.890  INFO 10376 --- [main] r.g.book.market.BookMarketApplication    : Starting BookMarketApplication using Java 15.0.1 on PC with PID 10376 (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes started by Андрей in C:\Users\Андрей\Desktop\Java HW\book_market)
2021-04-22 05:59:53.891  INFO 10376 --- [main] r.g.book.market.BookMarketApplication    : No active profile set, falling back to default profiles: default
2021-04-22 05:59:54.217  INFO 10376 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2021-04-22 05:59:54.225  INFO 10376 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 3 ms. Found 0 JPA repository interfaces.
2021-04-22 05:59:54.494  INFO 10376 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8189 (http)
2021-04-22 05:59:54.498  INFO 10376 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2021-04-22 05:59:54.499  INFO 10376 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.45]
2021-04-22 05:59:54.569  INFO 10376 --- [main] o.a.c.c.C.[.[localhost].[/book_market]   : Initializing Spring embedded WebApplicationContext
2021-04-22 05:59:54.570  INFO 10376 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 654 ms
2021-04-22 05:59:54.636  INFO 10376 --- [main] o.f.c.internal.license.VersionPrinter    : Flyway Community Edition 7.1.1 by Redgate
2021-04-22 05:59:54.638  INFO 10376 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2021-04-22 05:59:54.697  INFO 10376 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2021-04-22 05:59:54.708  INFO 10376 --- [main] o.f.c.i.database.base.DatabaseType       : Database: jdbc:postgresql://localhost:5432/db_book_market (PostgreSQL 13.2)
2021-04-22 05:59:54.735  INFO 10376 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 2 migrations (execution time 00:00.017s)
2021-04-22 05:59:54.740  INFO 10376 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema "book_market": null
2021-04-22 05:59:54.750  INFO 10376 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "book_market" to version "1 - create"
2021-04-22 05:59:54.756  INFO 10376 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "role" не существует, пропускается
2021-04-22 05:59:54.766  INFO 10376 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "address" не существует, пропускается
2021-04-22 05:59:54.786 ERROR 10376 --- [main] o.f.core.internal.command.DbMigrate      : Migration of schema "book_market" to version "1 - create" failed! Changes successfully rolled back.
2021-04-22 05:59:54.787  WARN 10376 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V1__create.sql failed
-------------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: ошибка синтаксиса (примерное положение: "user")
  Позиция: 14
Location   : db/migration/V1__create.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V1__create.sql)
Line       : 20
Statement  : create table user(
                         id bigserial primary key,
                         first_name varchar(255) not null,
                         last_name varchar(255) not null,
                         login varchar(255) not null,
                         password varchar(255) not null,
                         address bigint references address(id) not null
)

2021-04-22 05:59:54.787  INFO 10376 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2021-04-22 05:59:54.789  INFO 10376 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2021-04-22 05:59:54.790  INFO 10376 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2021-04-22 05:59:54.798  INFO 10376 --- [main] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2021-04-22 05:59:54.809 ERROR 10376 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V1__create.sql failed
-------------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: ошибка синтаксиса (примерное положение: "user")
  Позиция: 14
Location   : db/migration/V1__create.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V1__create.sql)
Line       : 20
Statement  : create table user(
                         id bigserial primary key,
                         first_name varchar(255) not null,
                         last_name varchar(255) not null,
                         login varchar(255) not null,
                         password varchar(255) not null,
                         address bigint references address(id) not null
)

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:602) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:524) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-5.3.6.jar:5.3.6]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908) ~[spring-context-5.3.6.jar:5.3.6]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.6.jar:5.3.6]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:144) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:782) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:774) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:339) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1340) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1329) ~[spring-boot-2.4.5.jar:2.4.5]
	at ru.geekbrains.book.market.BookMarketApplication.main(BookMarketApplication.java:10) ~[classes/:na]
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V1__create.sql failed
-------------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: ошибка синтаксиса (примерное положение: "user")
  Позиция: 14
Location   : db/migration/V1__create.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V1__create.sql)
Line       : 20
Statement  : create table user(
                         id bigserial primary key,
                         first_name varchar(255) not null,
                         last_name varchar(255) not null,
                         login varchar(255) not null,
                         password varchar(255) not null,
                         address bigint references address(id) not null
)

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:438) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.access$200(DbMigrate.java:56) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate$3.call(DbMigrate.java:341) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:66) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:338) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:303) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.access$100(DbMigrate.java:56) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate$2.call(DbMigrate.java:207) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate$2.call(DbMigrate.java:204) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:73) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLConnection.lock(PostgreSQLConnection.java:99) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:139) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:204) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:165) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway$1.execute(Flyway.java:215) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway$1.execute(Flyway.java:164) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway.execute(Flyway.java:538) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway.migrate(Flyway.java:164) ~[flyway-core-7.1.1.jar:na]
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66) ~[spring-boot-autoconfigure-2.4.5.jar:2.4.5]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1845) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-5.3.6.jar:5.3.6]
	... 19 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: 
Migration V1__create.sql failed
-------------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: ошибка синтаксиса (примерное положение: "user")
  Позиция: 14
Location   : db/migration/V1__create.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V1__create.sql)
Line       : 20
Statement  : create table user(
                         id bigserial primary key,
                         first_name varchar(255) not null,
                         last_name varchar(255) not null,
                         login varchar(255) not null,
                         password varchar(255) not null,
                         address bigint references address(id) not null
)

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:273) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:218) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:82) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.access$000(SqlMigrationExecutor.java:32) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor$1.call(SqlMigrationExecutor.java:70) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor$1.call(SqlMigrationExecutor.java:67) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:28) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:67) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:434) ~[flyway-core-7.1.1.jar:na]
	... 39 common frames omitted
Caused by: org.postgresql.util.PSQLException: ОШИБКА: ошибка синтаксиса (примерное положение: "user")
  Позиция: 14
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2553) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2285) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:323) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:481) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:401) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:322) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:308) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:284) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:279) ~[postgresql-42.2.19.jar:42.2.19]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95) ~[HikariCP-3.4.5.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-3.4.5.jar:na]
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:241) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:111) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:206) ~[flyway-core-7.1.1.jar:na]
	... 47 common frames omitted

2021-04-22 06:01:30.543  INFO 2584 --- [main] r.g.book.market.BookMarketApplication    : Starting BookMarketApplication using Java 15.0.1 on PC with PID 2584 (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes started by Андрей in C:\Users\Андрей\Desktop\Java HW\book_market)
2021-04-22 06:01:30.543  INFO 2584 --- [main] r.g.book.market.BookMarketApplication    : No active profile set, falling back to default profiles: default
2021-04-22 06:01:30.865  INFO 2584 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2021-04-22 06:01:30.881  INFO 2584 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2021-04-22 06:01:31.135  INFO 2584 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8189 (http)
2021-04-22 06:01:31.135  INFO 2584 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2021-04-22 06:01:31.135  INFO 2584 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.45]
2021-04-22 06:01:31.214  INFO 2584 --- [main] o.a.c.c.C.[.[localhost].[/book_market]   : Initializing Spring embedded WebApplicationContext
2021-04-22 06:01:31.214  INFO 2584 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 638 ms
2021-04-22 06:01:31.267  INFO 2584 --- [main] o.f.c.internal.license.VersionPrinter    : Flyway Community Edition 7.1.1 by Redgate
2021-04-22 06:01:31.283  INFO 2584 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2021-04-22 06:01:31.340  INFO 2584 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2021-04-22 06:01:31.352  INFO 2584 --- [main] o.f.c.i.database.base.DatabaseType       : Database: jdbc:postgresql://localhost:5432/db_book_market (PostgreSQL 13.2)
2021-04-22 06:01:31.371  INFO 2584 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 2 migrations (execution time 00:00.017s)
2021-04-22 06:01:31.371  INFO 2584 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema "book_market": null
2021-04-22 06:01:31.387  INFO 2584 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "book_market" to version "1 - create"
2021-04-22 06:01:31.387  INFO 2584 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "role" не существует, пропускается
2021-04-22 06:01:31.402  INFO 2584 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "address" не существует, пропускается
2021-04-22 06:01:31.418 ERROR 2584 --- [main] o.f.core.internal.command.DbMigrate      : Migration of schema "book_market" to version "1 - create" failed! Changes successfully rolled back.
2021-04-22 06:01:31.418  WARN 2584 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V1__create.sql failed
-------------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: ошибка синтаксиса (примерное положение: "user")
  Позиция: 22
Location   : db/migration/V1__create.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V1__create.sql)
Line       : 19
Statement  : drop table if exists user cascade

2021-04-22 06:01:31.418  INFO 2584 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2021-04-22 06:01:31.418  INFO 2584 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2021-04-22 06:01:31.418  INFO 2584 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2021-04-22 06:01:31.434  INFO 2584 --- [main] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2021-04-22 06:01:31.449 ERROR 2584 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V1__create.sql failed
-------------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: ошибка синтаксиса (примерное положение: "user")
  Позиция: 22
Location   : db/migration/V1__create.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V1__create.sql)
Line       : 19
Statement  : drop table if exists user cascade

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:602) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:524) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-5.3.6.jar:5.3.6]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908) ~[spring-context-5.3.6.jar:5.3.6]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.6.jar:5.3.6]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:144) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:782) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:774) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:339) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1340) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1329) ~[spring-boot-2.4.5.jar:2.4.5]
	at ru.geekbrains.book.market.BookMarketApplication.main(BookMarketApplication.java:10) ~[classes/:na]
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V1__create.sql failed
-------------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: ошибка синтаксиса (примерное положение: "user")
  Позиция: 22
Location   : db/migration/V1__create.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V1__create.sql)
Line       : 19
Statement  : drop table if exists user cascade

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:438) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.access$200(DbMigrate.java:56) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate$3.call(DbMigrate.java:341) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:66) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:338) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:303) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.access$100(DbMigrate.java:56) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate$2.call(DbMigrate.java:207) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate$2.call(DbMigrate.java:204) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:73) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLConnection.lock(PostgreSQLConnection.java:99) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:139) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:204) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:165) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway$1.execute(Flyway.java:215) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway$1.execute(Flyway.java:164) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway.execute(Flyway.java:538) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway.migrate(Flyway.java:164) ~[flyway-core-7.1.1.jar:na]
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66) ~[spring-boot-autoconfigure-2.4.5.jar:2.4.5]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1845) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-5.3.6.jar:5.3.6]
	... 19 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: 
Migration V1__create.sql failed
-------------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: ошибка синтаксиса (примерное положение: "user")
  Позиция: 22
Location   : db/migration/V1__create.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V1__create.sql)
Line       : 19
Statement  : drop table if exists user cascade

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:273) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:218) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:82) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.access$000(SqlMigrationExecutor.java:32) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor$1.call(SqlMigrationExecutor.java:70) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor$1.call(SqlMigrationExecutor.java:67) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:28) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:67) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:434) ~[flyway-core-7.1.1.jar:na]
	... 39 common frames omitted
Caused by: org.postgresql.util.PSQLException: ОШИБКА: ошибка синтаксиса (примерное положение: "user")
  Позиция: 22
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2553) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2285) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:323) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:481) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:401) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:322) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:308) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:284) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:279) ~[postgresql-42.2.19.jar:42.2.19]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95) ~[HikariCP-3.4.5.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-3.4.5.jar:na]
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:241) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:111) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:206) ~[flyway-core-7.1.1.jar:na]
	... 47 common frames omitted

2021-04-22 06:01:48.020  INFO 11988 --- [main] r.g.book.market.BookMarketApplication    : Starting BookMarketApplication using Java 15.0.1 on PC with PID 11988 (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes started by Андрей in C:\Users\Андрей\Desktop\Java HW\book_market)
2021-04-22 06:01:48.022  INFO 11988 --- [main] r.g.book.market.BookMarketApplication    : No active profile set, falling back to default profiles: default
2021-04-22 06:01:48.346  INFO 11988 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2021-04-22 06:01:48.353  INFO 11988 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2021-04-22 06:01:48.619  INFO 11988 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8189 (http)
2021-04-22 06:01:48.624  INFO 11988 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2021-04-22 06:01:48.624  INFO 11988 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.45]
2021-04-22 06:01:48.694  INFO 11988 --- [main] o.a.c.c.C.[.[localhost].[/book_market]   : Initializing Spring embedded WebApplicationContext
2021-04-22 06:01:48.694  INFO 11988 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 649 ms
2021-04-22 06:01:48.760  INFO 11988 --- [main] o.f.c.internal.license.VersionPrinter    : Flyway Community Edition 7.1.1 by Redgate
2021-04-22 06:01:48.763  INFO 11988 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2021-04-22 06:01:48.825  INFO 11988 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2021-04-22 06:01:48.836  INFO 11988 --- [main] o.f.c.i.database.base.DatabaseType       : Database: jdbc:postgresql://localhost:5432/db_book_market (PostgreSQL 13.2)
2021-04-22 06:01:48.862  INFO 11988 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 2 migrations (execution time 00:00.015s)
2021-04-22 06:01:48.866  INFO 11988 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema "book_market": null
2021-04-22 06:01:48.877  INFO 11988 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "book_market" to version "1 - create"
2021-04-22 06:01:48.883  INFO 11988 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "role" не существует, пропускается
2021-04-22 06:01:48.891  INFO 11988 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "address" не существует, пропускается
2021-04-22 06:01:48.900  INFO 11988 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "users" не существует, пропускается
2021-04-22 06:01:48.910  INFO 11988 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "user_role" не существует, пропускается
2021-04-22 06:01:48.922 ERROR 11988 --- [main] o.f.core.internal.command.DbMigrate      : Migration of schema "book_market" to version "1 - create" failed! Changes successfully rolled back.
2021-04-22 06:01:48.924  WARN 11988 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V1__create.sql failed
-------------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: ошибка синтаксиса (примерное положение: ";")
  Позиция: 75
Location   : db/migration/V1__create.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V1__create.sql)
Line       : 30
Statement  : create table users_role(
    user_id bigint not null references users(id);
    role_id bigint not null references role(id);
    primary key (user_id, role_id);
)


drop table if exists author cascade

2021-04-22 06:01:48.924  INFO 11988 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2021-04-22 06:01:48.925  INFO 11988 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2021-04-22 06:01:48.927  INFO 11988 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2021-04-22 06:01:48.935  INFO 11988 --- [main] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2021-04-22 06:01:48.946 ERROR 11988 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V1__create.sql failed
-------------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: ошибка синтаксиса (примерное положение: ";")
  Позиция: 75
Location   : db/migration/V1__create.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V1__create.sql)
Line       : 30
Statement  : create table users_role(
    user_id bigint not null references users(id);
    role_id bigint not null references role(id);
    primary key (user_id, role_id);
)


drop table if exists author cascade

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:602) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:524) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-5.3.6.jar:5.3.6]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908) ~[spring-context-5.3.6.jar:5.3.6]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.6.jar:5.3.6]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:144) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:782) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:774) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:339) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1340) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1329) ~[spring-boot-2.4.5.jar:2.4.5]
	at ru.geekbrains.book.market.BookMarketApplication.main(BookMarketApplication.java:10) ~[classes/:na]
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V1__create.sql failed
-------------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: ошибка синтаксиса (примерное положение: ";")
  Позиция: 75
Location   : db/migration/V1__create.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V1__create.sql)
Line       : 30
Statement  : create table users_role(
    user_id bigint not null references users(id);
    role_id bigint not null references role(id);
    primary key (user_id, role_id);
)


drop table if exists author cascade

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:438) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.access$200(DbMigrate.java:56) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate$3.call(DbMigrate.java:341) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:66) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:338) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:303) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.access$100(DbMigrate.java:56) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate$2.call(DbMigrate.java:207) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate$2.call(DbMigrate.java:204) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:73) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLConnection.lock(PostgreSQLConnection.java:99) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:139) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:204) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:165) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway$1.execute(Flyway.java:215) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway$1.execute(Flyway.java:164) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway.execute(Flyway.java:538) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway.migrate(Flyway.java:164) ~[flyway-core-7.1.1.jar:na]
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66) ~[spring-boot-autoconfigure-2.4.5.jar:2.4.5]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1845) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-5.3.6.jar:5.3.6]
	... 19 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: 
Migration V1__create.sql failed
-------------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: ошибка синтаксиса (примерное положение: ";")
  Позиция: 75
Location   : db/migration/V1__create.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V1__create.sql)
Line       : 30
Statement  : create table users_role(
    user_id bigint not null references users(id);
    role_id bigint not null references role(id);
    primary key (user_id, role_id);
)


drop table if exists author cascade

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:273) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:218) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:82) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.access$000(SqlMigrationExecutor.java:32) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor$1.call(SqlMigrationExecutor.java:70) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor$1.call(SqlMigrationExecutor.java:67) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:28) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:67) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:434) ~[flyway-core-7.1.1.jar:na]
	... 39 common frames omitted
Caused by: org.postgresql.util.PSQLException: ОШИБКА: ошибка синтаксиса (примерное положение: ";")
  Позиция: 75
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2553) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2285) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:323) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:481) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:401) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:322) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:308) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:284) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:279) ~[postgresql-42.2.19.jar:42.2.19]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95) ~[HikariCP-3.4.5.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-3.4.5.jar:na]
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:241) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:111) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:206) ~[flyway-core-7.1.1.jar:na]
	... 47 common frames omitted

2021-04-22 06:02:30.793  INFO 6948 --- [main] r.g.book.market.BookMarketApplication    : Starting BookMarketApplication using Java 15.0.1 on PC with PID 6948 (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes started by Андрей in C:\Users\Андрей\Desktop\Java HW\book_market)
2021-04-22 06:02:30.793  INFO 6948 --- [main] r.g.book.market.BookMarketApplication    : No active profile set, falling back to default profiles: default
2021-04-22 06:02:31.121  INFO 6948 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2021-04-22 06:02:31.121  INFO 6948 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2021-04-22 06:02:31.398  INFO 6948 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8189 (http)
2021-04-22 06:02:31.399  INFO 6948 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2021-04-22 06:02:31.399  INFO 6948 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.45]
2021-04-22 06:02:31.462  INFO 6948 --- [main] o.a.c.c.C.[.[localhost].[/book_market]   : Initializing Spring embedded WebApplicationContext
2021-04-22 06:02:31.462  INFO 6948 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 632 ms
2021-04-22 06:02:31.526  INFO 6948 --- [main] o.f.c.internal.license.VersionPrinter    : Flyway Community Edition 7.1.1 by Redgate
2021-04-22 06:02:31.541  INFO 6948 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2021-04-22 06:02:31.588  INFO 6948 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2021-04-22 06:02:31.604  INFO 6948 --- [main] o.f.c.i.database.base.DatabaseType       : Database: jdbc:postgresql://localhost:5432/db_book_market (PostgreSQL 13.2)
2021-04-22 06:02:31.635  INFO 6948 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 2 migrations (execution time 00:00.016s)
2021-04-22 06:02:31.635  INFO 6948 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema "book_market": null
2021-04-22 06:02:31.651  INFO 6948 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "book_market" to version "1 - create"
2021-04-22 06:02:31.651  INFO 6948 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "role" не существует, пропускается
2021-04-22 06:02:31.666  INFO 6948 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "address" не существует, пропускается
2021-04-22 06:02:31.666  INFO 6948 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "users" не существует, пропускается
2021-04-22 06:02:31.682  INFO 6948 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "users_role" не существует, пропускается
2021-04-22 06:02:31.682 ERROR 6948 --- [main] o.f.core.internal.command.DbMigrate      : Migration of schema "book_market" to version "1 - create" failed! Changes successfully rolled back.
2021-04-22 06:02:31.682  WARN 6948 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V1__create.sql failed
-------------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: ошибка синтаксиса (примерное положение: ")")
  Позиция: 165
Location   : db/migration/V1__create.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V1__create.sql)
Line       : 30
Statement  : create table users_role(
    user_id bigint not null references users(id),
    role_id bigint not null references role(id),
    primary key (user_id, role_id),
)


drop table if exists author cascade

2021-04-22 06:02:31.682  INFO 6948 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2021-04-22 06:02:31.682  INFO 6948 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2021-04-22 06:02:31.698  INFO 6948 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2021-04-22 06:02:31.698  INFO 6948 --- [main] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2021-04-22 06:02:31.713 ERROR 6948 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V1__create.sql failed
-------------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: ошибка синтаксиса (примерное положение: ")")
  Позиция: 165
Location   : db/migration/V1__create.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V1__create.sql)
Line       : 30
Statement  : create table users_role(
    user_id bigint not null references users(id),
    role_id bigint not null references role(id),
    primary key (user_id, role_id),
)


drop table if exists author cascade

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:602) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:524) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-5.3.6.jar:5.3.6]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908) ~[spring-context-5.3.6.jar:5.3.6]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.6.jar:5.3.6]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:144) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:782) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:774) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:339) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1340) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1329) ~[spring-boot-2.4.5.jar:2.4.5]
	at ru.geekbrains.book.market.BookMarketApplication.main(BookMarketApplication.java:10) ~[classes/:na]
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V1__create.sql failed
-------------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: ошибка синтаксиса (примерное положение: ")")
  Позиция: 165
Location   : db/migration/V1__create.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V1__create.sql)
Line       : 30
Statement  : create table users_role(
    user_id bigint not null references users(id),
    role_id bigint not null references role(id),
    primary key (user_id, role_id),
)


drop table if exists author cascade

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:438) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.access$200(DbMigrate.java:56) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate$3.call(DbMigrate.java:341) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:66) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:338) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:303) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.access$100(DbMigrate.java:56) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate$2.call(DbMigrate.java:207) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate$2.call(DbMigrate.java:204) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:73) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLConnection.lock(PostgreSQLConnection.java:99) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:139) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:204) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:165) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway$1.execute(Flyway.java:215) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway$1.execute(Flyway.java:164) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway.execute(Flyway.java:538) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway.migrate(Flyway.java:164) ~[flyway-core-7.1.1.jar:na]
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66) ~[spring-boot-autoconfigure-2.4.5.jar:2.4.5]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1845) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-5.3.6.jar:5.3.6]
	... 19 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: 
Migration V1__create.sql failed
-------------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: ошибка синтаксиса (примерное положение: ")")
  Позиция: 165
Location   : db/migration/V1__create.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V1__create.sql)
Line       : 30
Statement  : create table users_role(
    user_id bigint not null references users(id),
    role_id bigint not null references role(id),
    primary key (user_id, role_id),
)


drop table if exists author cascade

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:273) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:218) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:82) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.access$000(SqlMigrationExecutor.java:32) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor$1.call(SqlMigrationExecutor.java:70) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor$1.call(SqlMigrationExecutor.java:67) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:28) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:67) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:434) ~[flyway-core-7.1.1.jar:na]
	... 39 common frames omitted
Caused by: org.postgresql.util.PSQLException: ОШИБКА: ошибка синтаксиса (примерное положение: ")")
  Позиция: 165
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2553) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2285) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:323) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:481) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:401) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:322) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:308) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:284) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:279) ~[postgresql-42.2.19.jar:42.2.19]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95) ~[HikariCP-3.4.5.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-3.4.5.jar:na]
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:241) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:111) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:206) ~[flyway-core-7.1.1.jar:na]
	... 47 common frames omitted

2021-04-22 06:02:54.214  INFO 13412 --- [main] r.g.book.market.BookMarketApplication    : Starting BookMarketApplication using Java 15.0.1 on PC with PID 13412 (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes started by Андрей in C:\Users\Андрей\Desktop\Java HW\book_market)
2021-04-22 06:02:54.214  INFO 13412 --- [main] r.g.book.market.BookMarketApplication    : No active profile set, falling back to default profiles: default
2021-04-22 06:02:54.525  INFO 13412 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2021-04-22 06:02:54.540  INFO 13412 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2021-04-22 06:02:54.806  INFO 13412 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8189 (http)
2021-04-22 06:02:54.806  INFO 13412 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2021-04-22 06:02:54.806  INFO 13412 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.45]
2021-04-22 06:02:54.884  INFO 13412 --- [main] o.a.c.c.C.[.[localhost].[/book_market]   : Initializing Spring embedded WebApplicationContext
2021-04-22 06:02:54.884  INFO 13412 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 645 ms
2021-04-22 06:02:54.938  INFO 13412 --- [main] o.f.c.internal.license.VersionPrinter    : Flyway Community Edition 7.1.1 by Redgate
2021-04-22 06:02:54.954  INFO 13412 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2021-04-22 06:02:55.001  INFO 13412 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2021-04-22 06:02:55.016  INFO 13412 --- [main] o.f.c.i.database.base.DatabaseType       : Database: jdbc:postgresql://localhost:5432/db_book_market (PostgreSQL 13.2)
2021-04-22 06:02:55.048  INFO 13412 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 2 migrations (execution time 00:00.016s)
2021-04-22 06:02:55.048  INFO 13412 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema "book_market": null
2021-04-22 06:02:55.063  INFO 13412 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "book_market" to version "1 - create"
2021-04-22 06:02:55.063  INFO 13412 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "role" не существует, пропускается
2021-04-22 06:02:55.082  INFO 13412 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "address" не существует, пропускается
2021-04-22 06:02:55.089  INFO 13412 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "users" не существует, пропускается
2021-04-22 06:02:55.089  INFO 13412 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "users_role" не существует, пропускается
2021-04-22 06:02:55.105 ERROR 13412 --- [main] o.f.core.internal.command.DbMigrate      : Migration of schema "book_market" to version "1 - create" failed! Changes successfully rolled back.
2021-04-22 06:02:55.105  WARN 13412 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V1__create.sql failed
-------------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: ошибка синтаксиса (примерное положение: "drop")
  Позиция: 171
Location   : db/migration/V1__create.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V1__create.sql)
Line       : 30
Statement  : create table users_role(
    user_id bigint not null references users(id),
    role_id bigint not null references role(id),
    primary key (user_id, role_id)
)


drop table if exists author cascade

2021-04-22 06:02:55.105  INFO 13412 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2021-04-22 06:02:55.105  INFO 13412 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2021-04-22 06:02:55.105  INFO 13412 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2021-04-22 06:02:55.120  INFO 13412 --- [main] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2021-04-22 06:02:55.120 ERROR 13412 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V1__create.sql failed
-------------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: ошибка синтаксиса (примерное положение: "drop")
  Позиция: 171
Location   : db/migration/V1__create.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V1__create.sql)
Line       : 30
Statement  : create table users_role(
    user_id bigint not null references users(id),
    role_id bigint not null references role(id),
    primary key (user_id, role_id)
)


drop table if exists author cascade

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:602) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:524) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-5.3.6.jar:5.3.6]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908) ~[spring-context-5.3.6.jar:5.3.6]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.6.jar:5.3.6]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:144) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:782) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:774) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:339) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1340) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1329) ~[spring-boot-2.4.5.jar:2.4.5]
	at ru.geekbrains.book.market.BookMarketApplication.main(BookMarketApplication.java:10) ~[classes/:na]
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V1__create.sql failed
-------------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: ошибка синтаксиса (примерное положение: "drop")
  Позиция: 171
Location   : db/migration/V1__create.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V1__create.sql)
Line       : 30
Statement  : create table users_role(
    user_id bigint not null references users(id),
    role_id bigint not null references role(id),
    primary key (user_id, role_id)
)


drop table if exists author cascade

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:438) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.access$200(DbMigrate.java:56) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate$3.call(DbMigrate.java:341) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:66) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:338) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:303) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.access$100(DbMigrate.java:56) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate$2.call(DbMigrate.java:207) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate$2.call(DbMigrate.java:204) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:73) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLConnection.lock(PostgreSQLConnection.java:99) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:139) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:204) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:165) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway$1.execute(Flyway.java:215) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway$1.execute(Flyway.java:164) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway.execute(Flyway.java:538) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway.migrate(Flyway.java:164) ~[flyway-core-7.1.1.jar:na]
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66) ~[spring-boot-autoconfigure-2.4.5.jar:2.4.5]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1845) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-5.3.6.jar:5.3.6]
	... 19 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: 
Migration V1__create.sql failed
-------------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: ошибка синтаксиса (примерное положение: "drop")
  Позиция: 171
Location   : db/migration/V1__create.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V1__create.sql)
Line       : 30
Statement  : create table users_role(
    user_id bigint not null references users(id),
    role_id bigint not null references role(id),
    primary key (user_id, role_id)
)


drop table if exists author cascade

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:273) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:218) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:82) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.access$000(SqlMigrationExecutor.java:32) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor$1.call(SqlMigrationExecutor.java:70) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor$1.call(SqlMigrationExecutor.java:67) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:28) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:67) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:434) ~[flyway-core-7.1.1.jar:na]
	... 39 common frames omitted
Caused by: org.postgresql.util.PSQLException: ОШИБКА: ошибка синтаксиса (примерное положение: "drop")
  Позиция: 171
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2553) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2285) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:323) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:481) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:401) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:322) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:308) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:284) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:279) ~[postgresql-42.2.19.jar:42.2.19]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95) ~[HikariCP-3.4.5.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-3.4.5.jar:na]
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:241) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:111) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:206) ~[flyway-core-7.1.1.jar:na]
	... 47 common frames omitted

2021-04-22 06:04:10.191  INFO 3680 --- [main] r.g.book.market.BookMarketApplication    : Starting BookMarketApplication using Java 15.0.1 on PC with PID 3680 (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes started by Андрей in C:\Users\Андрей\Desktop\Java HW\book_market)
2021-04-22 06:04:10.191  INFO 3680 --- [main] r.g.book.market.BookMarketApplication    : No active profile set, falling back to default profiles: default
2021-04-22 06:04:10.518  INFO 3680 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2021-04-22 06:04:10.518  INFO 3680 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2021-04-22 06:04:10.772  INFO 3680 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8189 (http)
2021-04-22 06:04:10.788  INFO 3680 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2021-04-22 06:04:10.788  INFO 3680 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.45]
2021-04-22 06:04:10.850  INFO 3680 --- [main] o.a.c.c.C.[.[localhost].[/book_market]   : Initializing Spring embedded WebApplicationContext
2021-04-22 06:04:10.850  INFO 3680 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 628 ms
2021-04-22 06:04:10.911  INFO 3680 --- [main] o.f.c.internal.license.VersionPrinter    : Flyway Community Edition 7.1.1 by Redgate
2021-04-22 06:04:10.926  INFO 3680 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2021-04-22 06:04:10.973  INFO 3680 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2021-04-22 06:04:10.989  INFO 3680 --- [main] o.f.c.i.database.base.DatabaseType       : Database: jdbc:postgresql://localhost:5432/db_book_market (PostgreSQL 13.2)
2021-04-22 06:04:11.020  INFO 3680 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 2 migrations (execution time 00:00.015s)
2021-04-22 06:04:11.020  INFO 3680 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema "book_market": null
2021-04-22 06:04:11.036  INFO 3680 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "book_market" to version "1 - create"
2021-04-22 06:04:11.036  INFO 3680 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "role" не существует, пропускается
2021-04-22 06:04:11.036  INFO 3680 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "address" не существует, пропускается
2021-04-22 06:04:11.051  INFO 3680 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "users" не существует, пропускается
2021-04-22 06:04:11.067 ERROR 3680 --- [main] o.f.core.internal.command.DbMigrate      : Migration of schema "book_market" to version "1 - create" failed! Changes successfully rolled back.
2021-04-22 06:04:11.067  WARN 3680 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V1__create.sql failed
-------------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: ошибка синтаксиса (примерное положение: "drop")
  Позиция: 171
Location   : db/migration/V1__create.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V1__create.sql)
Line       : 30
Statement  : create table users_role(
    user_id bigint not null references users(id),
    role_id bigint not null references role(id),
    primary key (user_id, role_id)
)


drop table if exists author cascade

2021-04-22 06:04:11.067  INFO 3680 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2021-04-22 06:04:11.067  INFO 3680 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2021-04-22 06:04:11.083  INFO 3680 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2021-04-22 06:04:11.083  INFO 3680 --- [main] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2021-04-22 06:04:11.098 ERROR 3680 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V1__create.sql failed
-------------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: ошибка синтаксиса (примерное положение: "drop")
  Позиция: 171
Location   : db/migration/V1__create.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V1__create.sql)
Line       : 30
Statement  : create table users_role(
    user_id bigint not null references users(id),
    role_id bigint not null references role(id),
    primary key (user_id, role_id)
)


drop table if exists author cascade

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:602) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:524) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-5.3.6.jar:5.3.6]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908) ~[spring-context-5.3.6.jar:5.3.6]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.6.jar:5.3.6]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:144) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:782) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:774) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:339) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1340) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1329) ~[spring-boot-2.4.5.jar:2.4.5]
	at ru.geekbrains.book.market.BookMarketApplication.main(BookMarketApplication.java:10) ~[classes/:na]
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V1__create.sql failed
-------------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: ошибка синтаксиса (примерное положение: "drop")
  Позиция: 171
Location   : db/migration/V1__create.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V1__create.sql)
Line       : 30
Statement  : create table users_role(
    user_id bigint not null references users(id),
    role_id bigint not null references role(id),
    primary key (user_id, role_id)
)


drop table if exists author cascade

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:438) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.access$200(DbMigrate.java:56) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate$3.call(DbMigrate.java:341) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:66) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:338) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:303) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.access$100(DbMigrate.java:56) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate$2.call(DbMigrate.java:207) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate$2.call(DbMigrate.java:204) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:73) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLConnection.lock(PostgreSQLConnection.java:99) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:139) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:204) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:165) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway$1.execute(Flyway.java:215) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway$1.execute(Flyway.java:164) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway.execute(Flyway.java:538) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway.migrate(Flyway.java:164) ~[flyway-core-7.1.1.jar:na]
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66) ~[spring-boot-autoconfigure-2.4.5.jar:2.4.5]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1845) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-5.3.6.jar:5.3.6]
	... 19 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: 
Migration V1__create.sql failed
-------------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: ошибка синтаксиса (примерное положение: "drop")
  Позиция: 171
Location   : db/migration/V1__create.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V1__create.sql)
Line       : 30
Statement  : create table users_role(
    user_id bigint not null references users(id),
    role_id bigint not null references role(id),
    primary key (user_id, role_id)
)


drop table if exists author cascade

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:273) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:218) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:82) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.access$000(SqlMigrationExecutor.java:32) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor$1.call(SqlMigrationExecutor.java:70) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor$1.call(SqlMigrationExecutor.java:67) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:28) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:67) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:434) ~[flyway-core-7.1.1.jar:na]
	... 39 common frames omitted
Caused by: org.postgresql.util.PSQLException: ОШИБКА: ошибка синтаксиса (примерное положение: "drop")
  Позиция: 171
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2553) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2285) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:323) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:481) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:401) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:322) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:308) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:284) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:279) ~[postgresql-42.2.19.jar:42.2.19]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95) ~[HikariCP-3.4.5.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-3.4.5.jar:na]
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:241) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:111) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:206) ~[flyway-core-7.1.1.jar:na]
	... 47 common frames omitted

2021-04-22 06:04:49.470  INFO 6660 --- [main] r.g.book.market.BookMarketApplication    : Starting BookMarketApplication using Java 15.0.1 on PC with PID 6660 (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes started by Андрей in C:\Users\Андрей\Desktop\Java HW\book_market)
2021-04-22 06:04:49.470  INFO 6660 --- [main] r.g.book.market.BookMarketApplication    : No active profile set, falling back to default profiles: default
2021-04-22 06:04:49.789  INFO 6660 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2021-04-22 06:04:49.789  INFO 6660 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2021-04-22 06:04:50.063  INFO 6660 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8189 (http)
2021-04-22 06:04:50.068  INFO 6660 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2021-04-22 06:04:50.068  INFO 6660 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.45]
2021-04-22 06:04:50.135  INFO 6660 --- [main] o.a.c.c.C.[.[localhost].[/book_market]   : Initializing Spring embedded WebApplicationContext
2021-04-22 06:04:50.135  INFO 6660 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 638 ms
2021-04-22 06:04:50.194  INFO 6660 --- [main] o.f.c.internal.license.VersionPrinter    : Flyway Community Edition 7.1.1 by Redgate
2021-04-22 06:04:50.210  INFO 6660 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2021-04-22 06:04:50.257  INFO 6660 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2021-04-22 06:04:50.272  INFO 6660 --- [main] o.f.c.i.database.base.DatabaseType       : Database: jdbc:postgresql://localhost:5432/db_book_market (PostgreSQL 13.2)
2021-04-22 06:04:50.303  INFO 6660 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 2 migrations (execution time 00:00.016s)
2021-04-22 06:04:50.303  INFO 6660 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema "book_market": null
2021-04-22 06:04:50.319  INFO 6660 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "book_market" to version "1 - create"
2021-04-22 06:04:50.319  INFO 6660 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "role" не существует, пропускается
2021-04-22 06:04:50.319  INFO 6660 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "address" не существует, пропускается
2021-04-22 06:04:50.335  INFO 6660 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "users" не существует, пропускается
2021-04-22 06:04:50.350  INFO 6660 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "users_role" не существует, пропускается
2021-04-22 06:04:50.350  INFO 6660 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "author" не существует, пропускается
2021-04-22 06:04:50.350  INFO 6660 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "genre" не существует, пропускается
2021-04-22 06:04:50.366  INFO 6660 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "book" не существует, пропускается
2021-04-22 06:04:50.366  INFO 6660 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "author_book" не существует, пропускается
2021-04-22 06:04:50.382 ERROR 6660 --- [main] o.f.core.internal.command.DbMigrate      : Migration of schema "book_market" to version "1 - create" failed! Changes successfully rolled back.
2021-04-22 06:04:50.382  WARN 6660 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V1__create.sql failed
-------------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: ошибка синтаксиса (примерное положение: ";")
  Позиция: 75
Location   : db/migration/V1__create.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V1__create.sql)
Line       : 62
Statement  : create table author_book(
    book_id bigint not null references book(id);
    author_id bigint not null references author(id);
    primary key(book_id, author_id);
)

2021-04-22 06:04:50.382  INFO 6660 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2021-04-22 06:04:50.397  INFO 6660 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2021-04-22 06:04:50.397  INFO 6660 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2021-04-22 06:04:50.413  INFO 6660 --- [main] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2021-04-22 06:04:50.413 ERROR 6660 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V1__create.sql failed
-------------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: ошибка синтаксиса (примерное положение: ";")
  Позиция: 75
Location   : db/migration/V1__create.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V1__create.sql)
Line       : 62
Statement  : create table author_book(
    book_id bigint not null references book(id);
    author_id bigint not null references author(id);
    primary key(book_id, author_id);
)

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:602) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:524) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-5.3.6.jar:5.3.6]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908) ~[spring-context-5.3.6.jar:5.3.6]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.6.jar:5.3.6]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:144) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:782) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:774) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:339) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1340) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1329) ~[spring-boot-2.4.5.jar:2.4.5]
	at ru.geekbrains.book.market.BookMarketApplication.main(BookMarketApplication.java:10) ~[classes/:na]
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V1__create.sql failed
-------------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: ошибка синтаксиса (примерное положение: ";")
  Позиция: 75
Location   : db/migration/V1__create.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V1__create.sql)
Line       : 62
Statement  : create table author_book(
    book_id bigint not null references book(id);
    author_id bigint not null references author(id);
    primary key(book_id, author_id);
)

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:438) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.access$200(DbMigrate.java:56) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate$3.call(DbMigrate.java:341) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:66) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:338) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:303) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.access$100(DbMigrate.java:56) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate$2.call(DbMigrate.java:207) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate$2.call(DbMigrate.java:204) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:73) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLConnection.lock(PostgreSQLConnection.java:99) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:139) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:204) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:165) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway$1.execute(Flyway.java:215) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway$1.execute(Flyway.java:164) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway.execute(Flyway.java:538) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway.migrate(Flyway.java:164) ~[flyway-core-7.1.1.jar:na]
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66) ~[spring-boot-autoconfigure-2.4.5.jar:2.4.5]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1845) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-5.3.6.jar:5.3.6]
	... 19 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: 
Migration V1__create.sql failed
-------------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: ошибка синтаксиса (примерное положение: ";")
  Позиция: 75
Location   : db/migration/V1__create.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V1__create.sql)
Line       : 62
Statement  : create table author_book(
    book_id bigint not null references book(id);
    author_id bigint not null references author(id);
    primary key(book_id, author_id);
)

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:273) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:218) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:82) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.access$000(SqlMigrationExecutor.java:32) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor$1.call(SqlMigrationExecutor.java:70) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor$1.call(SqlMigrationExecutor.java:67) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:28) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:67) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:434) ~[flyway-core-7.1.1.jar:na]
	... 39 common frames omitted
Caused by: org.postgresql.util.PSQLException: ОШИБКА: ошибка синтаксиса (примерное положение: ";")
  Позиция: 75
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2553) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2285) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:323) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:481) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:401) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:322) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:308) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:284) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:279) ~[postgresql-42.2.19.jar:42.2.19]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95) ~[HikariCP-3.4.5.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-3.4.5.jar:na]
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:241) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:111) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:206) ~[flyway-core-7.1.1.jar:na]
	... 47 common frames omitted

2021-04-22 06:05:16.594  INFO 7636 --- [main] r.g.book.market.BookMarketApplication    : Starting BookMarketApplication using Java 15.0.1 on PC with PID 7636 (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes started by Андрей in C:\Users\Андрей\Desktop\Java HW\book_market)
2021-04-22 06:05:16.594  INFO 7636 --- [main] r.g.book.market.BookMarketApplication    : No active profile set, falling back to default profiles: default
2021-04-22 06:05:16.913  INFO 7636 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2021-04-22 06:05:16.913  INFO 7636 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2021-04-22 06:05:17.179  INFO 7636 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8189 (http)
2021-04-22 06:05:17.179  INFO 7636 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2021-04-22 06:05:17.179  INFO 7636 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.45]
2021-04-22 06:05:17.257  INFO 7636 --- [main] o.a.c.c.C.[.[localhost].[/book_market]   : Initializing Spring embedded WebApplicationContext
2021-04-22 06:05:17.257  INFO 7636 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 635 ms
2021-04-22 06:05:17.322  INFO 7636 --- [main] o.f.c.internal.license.VersionPrinter    : Flyway Community Edition 7.1.1 by Redgate
2021-04-22 06:05:17.322  INFO 7636 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2021-04-22 06:05:17.385  INFO 7636 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2021-04-22 06:05:17.400  INFO 7636 --- [main] o.f.c.i.database.base.DatabaseType       : Database: jdbc:postgresql://localhost:5432/db_book_market (PostgreSQL 13.2)
2021-04-22 06:05:17.416  INFO 7636 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 2 migrations (execution time 00:00.016s)
2021-04-22 06:05:17.432  INFO 7636 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema "book_market": null
2021-04-22 06:05:17.432  INFO 7636 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "book_market" to version "1 - create"
2021-04-22 06:05:17.447  INFO 7636 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "role" не существует, пропускается
2021-04-22 06:05:17.447  INFO 7636 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "address" не существует, пропускается
2021-04-22 06:05:17.463  INFO 7636 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "users" не существует, пропускается
2021-04-22 06:05:17.463  INFO 7636 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "users_role" не существует, пропускается
2021-04-22 06:05:17.478  INFO 7636 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "author" не существует, пропускается
2021-04-22 06:05:17.478  INFO 7636 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "genre" не существует, пропускается
2021-04-22 06:05:17.478  INFO 7636 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "book" не существует, пропускается
2021-04-22 06:05:17.494  INFO 7636 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "author_book" не существует, пропускается
2021-04-22 06:05:17.510 ERROR 7636 --- [main] o.f.core.internal.command.DbMigrate      : Migration of schema "book_market" to version "1 - create" failed! Changes successfully rolled back.
2021-04-22 06:05:17.510  WARN 7636 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V1__create.sql failed
-------------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: ошибка синтаксиса (примерное положение: ")")
  Позиция: 170
Location   : db/migration/V1__create.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V1__create.sql)
Line       : 62
Statement  : create table author_book(
    book_id bigint not null references book(id),
    author_id bigint not null references author(id),
    primary key(book_id, author_id),
)

2021-04-22 06:05:17.510  INFO 7636 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2021-04-22 06:05:17.510  INFO 7636 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2021-04-22 06:05:17.510  INFO 7636 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2021-04-22 06:05:17.525  INFO 7636 --- [main] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2021-04-22 06:05:17.541 ERROR 7636 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V1__create.sql failed
-------------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: ошибка синтаксиса (примерное положение: ")")
  Позиция: 170
Location   : db/migration/V1__create.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V1__create.sql)
Line       : 62
Statement  : create table author_book(
    book_id bigint not null references book(id),
    author_id bigint not null references author(id),
    primary key(book_id, author_id),
)

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:602) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:524) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-5.3.6.jar:5.3.6]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908) ~[spring-context-5.3.6.jar:5.3.6]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.6.jar:5.3.6]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:144) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:782) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:774) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:339) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1340) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1329) ~[spring-boot-2.4.5.jar:2.4.5]
	at ru.geekbrains.book.market.BookMarketApplication.main(BookMarketApplication.java:10) ~[classes/:na]
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V1__create.sql failed
-------------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: ошибка синтаксиса (примерное положение: ")")
  Позиция: 170
Location   : db/migration/V1__create.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V1__create.sql)
Line       : 62
Statement  : create table author_book(
    book_id bigint not null references book(id),
    author_id bigint not null references author(id),
    primary key(book_id, author_id),
)

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:438) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.access$200(DbMigrate.java:56) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate$3.call(DbMigrate.java:341) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:66) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:338) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:303) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.access$100(DbMigrate.java:56) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate$2.call(DbMigrate.java:207) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate$2.call(DbMigrate.java:204) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:73) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLConnection.lock(PostgreSQLConnection.java:99) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:139) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:204) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:165) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway$1.execute(Flyway.java:215) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway$1.execute(Flyway.java:164) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway.execute(Flyway.java:538) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway.migrate(Flyway.java:164) ~[flyway-core-7.1.1.jar:na]
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66) ~[spring-boot-autoconfigure-2.4.5.jar:2.4.5]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1845) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-5.3.6.jar:5.3.6]
	... 19 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: 
Migration V1__create.sql failed
-------------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: ошибка синтаксиса (примерное положение: ")")
  Позиция: 170
Location   : db/migration/V1__create.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V1__create.sql)
Line       : 62
Statement  : create table author_book(
    book_id bigint not null references book(id),
    author_id bigint not null references author(id),
    primary key(book_id, author_id),
)

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:273) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:218) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:82) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.access$000(SqlMigrationExecutor.java:32) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor$1.call(SqlMigrationExecutor.java:70) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor$1.call(SqlMigrationExecutor.java:67) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:28) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:67) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:434) ~[flyway-core-7.1.1.jar:na]
	... 39 common frames omitted
Caused by: org.postgresql.util.PSQLException: ОШИБКА: ошибка синтаксиса (примерное положение: ")")
  Позиция: 170
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2553) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2285) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:323) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:481) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:401) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:322) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:308) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:284) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:279) ~[postgresql-42.2.19.jar:42.2.19]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95) ~[HikariCP-3.4.5.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-3.4.5.jar:na]
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:241) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:111) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:206) ~[flyway-core-7.1.1.jar:na]
	... 47 common frames omitted

2021-04-22 06:05:32.465  INFO 14148 --- [main] r.g.book.market.BookMarketApplication    : Starting BookMarketApplication using Java 15.0.1 on PC with PID 14148 (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes started by Андрей in C:\Users\Андрей\Desktop\Java HW\book_market)
2021-04-22 06:05:32.465  INFO 14148 --- [main] r.g.book.market.BookMarketApplication    : No active profile set, falling back to default profiles: default
2021-04-22 06:05:32.781  INFO 14148 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2021-04-22 06:05:32.781  INFO 14148 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2021-04-22 06:05:33.050  INFO 14148 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8189 (http)
2021-04-22 06:05:33.050  INFO 14148 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2021-04-22 06:05:33.050  INFO 14148 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.45]
2021-04-22 06:05:33.129  INFO 14148 --- [main] o.a.c.c.C.[.[localhost].[/book_market]   : Initializing Spring embedded WebApplicationContext
2021-04-22 06:05:33.129  INFO 14148 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 642 ms
2021-04-22 06:05:33.181  INFO 14148 --- [main] o.f.c.internal.license.VersionPrinter    : Flyway Community Edition 7.1.1 by Redgate
2021-04-22 06:05:33.197  INFO 14148 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2021-04-22 06:05:33.259  INFO 14148 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2021-04-22 06:05:33.259  INFO 14148 --- [main] o.f.c.i.database.base.DatabaseType       : Database: jdbc:postgresql://localhost:5432/db_book_market (PostgreSQL 13.2)
2021-04-22 06:05:33.290  INFO 14148 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 2 migrations (execution time 00:00.016s)
2021-04-22 06:05:33.290  INFO 14148 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema "book_market": null
2021-04-22 06:05:33.306  INFO 14148 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "book_market" to version "1 - create"
2021-04-22 06:05:33.306  INFO 14148 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "role" не существует, пропускается
2021-04-22 06:05:33.322  INFO 14148 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "address" не существует, пропускается
2021-04-22 06:05:33.322  INFO 14148 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "users" не существует, пропускается
2021-04-22 06:05:33.337  INFO 14148 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "users_role" не существует, пропускается
2021-04-22 06:05:33.337  INFO 14148 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "author" не существует, пропускается
2021-04-22 06:05:33.353  INFO 14148 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "genre" не существует, пропускается
2021-04-22 06:05:33.353  INFO 14148 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "book" не существует, пропускается
2021-04-22 06:05:33.353  INFO 14148 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "author_book" не существует, пропускается
2021-04-22 06:05:33.353  INFO 14148 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "storage" не существует, пропускается
2021-04-22 06:05:33.368  INFO 14148 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "order_items" не существует, пропускается
2021-04-22 06:05:33.368  INFO 14148 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "status" не существует, пропускается
2021-04-22 06:05:33.368  INFO 14148 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "orders" не существует, пропускается
2021-04-22 06:05:33.405 ERROR 14148 --- [main] o.f.core.internal.command.DbMigrate      : Migration of schema "book_market" to version "1 - create" failed! Changes successfully rolled back.
2021-04-22 06:05:33.405  WARN 14148 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V1__create.sql failed
-------------------------------
SQL State  : 42P01
Error Code : 0
Message    : ОШИБКА: отношение "customer" не существует
Location   : db/migration/V1__create.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V1__create.sql)
Line       : 90
Statement  : create table orders(
                       id bigserial primary key,
                       order_items bigint references order_items(id) not null,
                       users bigint references customer(id) not null,
                       status int references status(id) not null
)

2021-04-22 06:05:33.405  INFO 14148 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2021-04-22 06:05:33.421  INFO 14148 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2021-04-22 06:05:33.421  INFO 14148 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2021-04-22 06:05:33.421  INFO 14148 --- [main] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2021-04-22 06:05:33.437 ERROR 14148 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V1__create.sql failed
-------------------------------
SQL State  : 42P01
Error Code : 0
Message    : ОШИБКА: отношение "customer" не существует
Location   : db/migration/V1__create.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V1__create.sql)
Line       : 90
Statement  : create table orders(
                       id bigserial primary key,
                       order_items bigint references order_items(id) not null,
                       users bigint references customer(id) not null,
                       status int references status(id) not null
)

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:602) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:524) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-5.3.6.jar:5.3.6]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908) ~[spring-context-5.3.6.jar:5.3.6]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.6.jar:5.3.6]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:144) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:782) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:774) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:339) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1340) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1329) ~[spring-boot-2.4.5.jar:2.4.5]
	at ru.geekbrains.book.market.BookMarketApplication.main(BookMarketApplication.java:10) ~[classes/:na]
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V1__create.sql failed
-------------------------------
SQL State  : 42P01
Error Code : 0
Message    : ОШИБКА: отношение "customer" не существует
Location   : db/migration/V1__create.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V1__create.sql)
Line       : 90
Statement  : create table orders(
                       id bigserial primary key,
                       order_items bigint references order_items(id) not null,
                       users bigint references customer(id) not null,
                       status int references status(id) not null
)

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:438) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.access$200(DbMigrate.java:56) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate$3.call(DbMigrate.java:341) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:66) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:338) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:303) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.access$100(DbMigrate.java:56) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate$2.call(DbMigrate.java:207) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate$2.call(DbMigrate.java:204) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:73) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLConnection.lock(PostgreSQLConnection.java:99) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:139) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:204) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:165) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway$1.execute(Flyway.java:215) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway$1.execute(Flyway.java:164) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway.execute(Flyway.java:538) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway.migrate(Flyway.java:164) ~[flyway-core-7.1.1.jar:na]
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66) ~[spring-boot-autoconfigure-2.4.5.jar:2.4.5]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1845) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-5.3.6.jar:5.3.6]
	... 19 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: 
Migration V1__create.sql failed
-------------------------------
SQL State  : 42P01
Error Code : 0
Message    : ОШИБКА: отношение "customer" не существует
Location   : db/migration/V1__create.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V1__create.sql)
Line       : 90
Statement  : create table orders(
                       id bigserial primary key,
                       order_items bigint references order_items(id) not null,
                       users bigint references customer(id) not null,
                       status int references status(id) not null
)

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:273) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:218) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:82) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.access$000(SqlMigrationExecutor.java:32) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor$1.call(SqlMigrationExecutor.java:70) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor$1.call(SqlMigrationExecutor.java:67) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:28) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:67) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:434) ~[flyway-core-7.1.1.jar:na]
	... 39 common frames omitted
Caused by: org.postgresql.util.PSQLException: ОШИБКА: отношение "customer" не существует
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2553) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2285) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:323) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:481) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:401) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:322) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:308) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:284) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:279) ~[postgresql-42.2.19.jar:42.2.19]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95) ~[HikariCP-3.4.5.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-3.4.5.jar:na]
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:241) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:111) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:206) ~[flyway-core-7.1.1.jar:na]
	... 47 common frames omitted

2021-04-22 06:05:56.142  INFO 11240 --- [main] r.g.book.market.BookMarketApplication    : Starting BookMarketApplication using Java 15.0.1 on PC with PID 11240 (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes started by Андрей in C:\Users\Андрей\Desktop\Java HW\book_market)
2021-04-22 06:05:56.144  INFO 11240 --- [main] r.g.book.market.BookMarketApplication    : No active profile set, falling back to default profiles: default
2021-04-22 06:05:56.467  INFO 11240 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2021-04-22 06:05:56.473  INFO 11240 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2021-04-22 06:05:56.736  INFO 11240 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8189 (http)
2021-04-22 06:05:56.736  INFO 11240 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2021-04-22 06:05:56.736  INFO 11240 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.45]
2021-04-22 06:05:56.798  INFO 11240 --- [main] o.a.c.c.C.[.[localhost].[/book_market]   : Initializing Spring embedded WebApplicationContext
2021-04-22 06:05:56.798  INFO 11240 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 630 ms
2021-04-22 06:05:56.863  INFO 11240 --- [main] o.f.c.internal.license.VersionPrinter    : Flyway Community Edition 7.1.1 by Redgate
2021-04-22 06:05:56.879  INFO 11240 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2021-04-22 06:05:56.926  INFO 11240 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2021-04-22 06:05:56.942  INFO 11240 --- [main] o.f.c.i.database.base.DatabaseType       : Database: jdbc:postgresql://localhost:5432/db_book_market (PostgreSQL 13.2)
2021-04-22 06:05:56.973  INFO 11240 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 2 migrations (execution time 00:00.016s)
2021-04-22 06:05:56.973  INFO 11240 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema "book_market": null
2021-04-22 06:05:56.973  INFO 11240 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "book_market" to version "1 - create"
2021-04-22 06:05:56.988  INFO 11240 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "role" не существует, пропускается
2021-04-22 06:05:57.004  INFO 11240 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "address" не существует, пропускается
2021-04-22 06:05:57.004  INFO 11240 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "users" не существует, пропускается
2021-04-22 06:05:57.020  INFO 11240 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "users_role" не существует, пропускается
2021-04-22 06:05:57.020  INFO 11240 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "author" не существует, пропускается
2021-04-22 06:05:57.020  INFO 11240 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "genre" не существует, пропускается
2021-04-22 06:05:57.035  INFO 11240 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "book" не существует, пропускается
2021-04-22 06:05:57.035  INFO 11240 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "author_book" не существует, пропускается
2021-04-22 06:05:57.035  INFO 11240 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "storage" не существует, пропускается
2021-04-22 06:05:57.051  INFO 11240 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "order_items" не существует, пропускается
2021-04-22 06:05:57.051  INFO 11240 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "status" не существует, пропускается
2021-04-22 06:05:57.051  INFO 11240 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: таблица "orders" не существует, пропускается
2021-04-22 06:05:57.067  INFO 11240 --- [main] o.f.core.internal.command.DbMigrate      : Successfully applied 1 migration to schema "book_market" (execution time 00:00.101s)
2021-04-22 06:05:57.129  INFO 11240 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2021-04-22 06:05:57.176  INFO 11240 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.4.30.Final
2021-04-22 06:05:57.270  INFO 11240 --- [main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2021-04-22 06:05:57.348  INFO 11240 --- [main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL94Dialect
2021-04-22 06:05:57.442  INFO 11240 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2021-04-22 06:05:57.442  INFO 11240 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2021-04-22 06:05:57.473  WARN 11240 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2021-04-22 06:05:57.535  INFO 11240 --- [main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'
2021-04-22 06:05:57.645  INFO 11240 --- [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: da0b5d47-263d-43f6-9670-d922045d79a1

2021-04-22 06:05:57.720  INFO 11240 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@40a8a26f, org.springframework.security.web.context.SecurityContextPersistenceFilter@5f7cd50e, org.springframework.security.web.header.HeaderWriterFilter@69a73867, org.springframework.security.web.csrf.CsrfFilter@632c3f55, org.springframework.security.web.authentication.logout.LogoutFilter@139089a4, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@5501d1c8, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@6a6e9289, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@269308cc, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@44aeae34, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@d76099a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@750e2d33, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@177ddd24, org.springframework.security.web.session.SessionManagementFilter@1d3a03fe, org.springframework.security.web.access.ExceptionTranslationFilter@21abda60, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@671da0f9]
2021-04-22 06:05:57.767  INFO 11240 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8189 (http) with context path '/book_market'
2021-04-22 06:05:57.782  INFO 11240 --- [main] r.g.book.market.BookMarketApplication    : Started BookMarketApplication in 1.887 seconds (JVM running for 2.256)
2021-04-22 06:56:19.899  INFO 6740 --- [main] r.g.book.market.BookMarketApplication    : Starting BookMarketApplication using Java 15.0.1 on PC with PID 6740 (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes started by Андрей in C:\Users\Андрей\Desktop\Java HW\book_market)
2021-04-22 06:56:19.904  INFO 6740 --- [main] r.g.book.market.BookMarketApplication    : No active profile set, falling back to default profiles: default
2021-04-22 06:56:20.222  INFO 6740 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2021-04-22 06:56:20.222  INFO 6740 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2021-04-22 06:56:20.487  INFO 6740 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8189 (http)
2021-04-22 06:56:20.487  INFO 6740 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2021-04-22 06:56:20.487  INFO 6740 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.45]
2021-04-22 06:56:20.675  INFO 6740 --- [main] o.a.c.c.C.[.[localhost].[/book_market]   : Initializing Spring embedded WebApplicationContext
2021-04-22 06:56:20.675  INFO 6740 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 746 ms
2021-04-22 06:56:20.737  INFO 6740 --- [main] o.f.c.internal.license.VersionPrinter    : Flyway Community Edition 7.1.1 by Redgate
2021-04-22 06:56:20.753  INFO 6740 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2021-04-22 06:56:20.800  INFO 6740 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2021-04-22 06:56:20.816  INFO 6740 --- [main] o.f.c.i.database.base.DatabaseType       : Database: jdbc:postgresql://localhost:5432/db_book_market (PostgreSQL 13.2)
2021-04-22 06:56:20.847  INFO 6740 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 3 migrations (execution time 00:00.017s)
2021-04-22 06:56:20.847  INFO 6740 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema "book_market": 1
2021-04-22 06:56:20.862  INFO 6740 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "book_market" to version "2 - init"
2021-04-22 06:56:20.862  INFO 6740 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: удаление распространяется на ещё 3 объекта
2021-04-22 06:56:20.894 ERROR 6740 --- [main] o.f.core.internal.command.DbMigrate      : Migration of schema "book_market" to version "2 - init" failed! Changes successfully rolled back.
2021-04-22 06:56:20.894  WARN 6740 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V2__init.sql failed
-----------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: INSERT содержит больше выражений, чем целевых столбцов
  Позиция: 271
Location   : db/migration/V2__init.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V2__init.sql)
Line       : 26
Statement  : INSERT INTO users VALUES (1,
                             'Иванов',
                             'Сергей',
                             'ivanov_sergey@mail.com',
                             'manager1',
                             1,
                             '+79503743875')

2021-04-22 06:56:20.894  INFO 6740 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2021-04-22 06:56:20.894  INFO 6740 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2021-04-22 06:56:20.894  INFO 6740 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2021-04-22 06:56:20.894  INFO 6740 --- [main] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2021-04-22 06:56:20.909 ERROR 6740 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V2__init.sql failed
-----------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: INSERT содержит больше выражений, чем целевых столбцов
  Позиция: 271
Location   : db/migration/V2__init.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V2__init.sql)
Line       : 26
Statement  : INSERT INTO users VALUES (1,
                             'Иванов',
                             'Сергей',
                             'ivanov_sergey@mail.com',
                             'manager1',
                             1,
                             '+79503743875')

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:602) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:524) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-5.3.6.jar:5.3.6]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908) ~[spring-context-5.3.6.jar:5.3.6]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.6.jar:5.3.6]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:144) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:782) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:774) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:339) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1340) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1329) ~[spring-boot-2.4.5.jar:2.4.5]
	at ru.geekbrains.book.market.BookMarketApplication.main(BookMarketApplication.java:10) ~[classes/:na]
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V2__init.sql failed
-----------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: INSERT содержит больше выражений, чем целевых столбцов
  Позиция: 271
Location   : db/migration/V2__init.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V2__init.sql)
Line       : 26
Statement  : INSERT INTO users VALUES (1,
                             'Иванов',
                             'Сергей',
                             'ivanov_sergey@mail.com',
                             'manager1',
                             1,
                             '+79503743875')

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:438) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.access$200(DbMigrate.java:56) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate$3.call(DbMigrate.java:341) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:66) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:338) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:303) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.access$100(DbMigrate.java:56) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate$2.call(DbMigrate.java:207) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate$2.call(DbMigrate.java:204) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:73) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLConnection.lock(PostgreSQLConnection.java:99) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:139) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:204) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:165) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway$1.execute(Flyway.java:215) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway$1.execute(Flyway.java:164) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway.execute(Flyway.java:538) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway.migrate(Flyway.java:164) ~[flyway-core-7.1.1.jar:na]
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66) ~[spring-boot-autoconfigure-2.4.5.jar:2.4.5]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1845) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-5.3.6.jar:5.3.6]
	... 19 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: 
Migration V2__init.sql failed
-----------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: INSERT содержит больше выражений, чем целевых столбцов
  Позиция: 271
Location   : db/migration/V2__init.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V2__init.sql)
Line       : 26
Statement  : INSERT INTO users VALUES (1,
                             'Иванов',
                             'Сергей',
                             'ivanov_sergey@mail.com',
                             'manager1',
                             1,
                             '+79503743875')

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:273) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:218) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:82) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.access$000(SqlMigrationExecutor.java:32) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor$1.call(SqlMigrationExecutor.java:70) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor$1.call(SqlMigrationExecutor.java:67) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:28) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:67) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:434) ~[flyway-core-7.1.1.jar:na]
	... 39 common frames omitted
Caused by: org.postgresql.util.PSQLException: ОШИБКА: INSERT содержит больше выражений, чем целевых столбцов
  Позиция: 271
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2553) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2285) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:323) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:481) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:401) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:322) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:308) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:284) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:279) ~[postgresql-42.2.19.jar:42.2.19]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95) ~[HikariCP-3.4.5.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-3.4.5.jar:na]
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:241) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:111) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:206) ~[flyway-core-7.1.1.jar:na]
	... 47 common frames omitted

2021-04-22 06:58:06.199  INFO 2532 --- [main] r.g.book.market.BookMarketApplication    : Starting BookMarketApplication using Java 15.0.1 on PC with PID 2532 (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes started by Андрей in C:\Users\Андрей\Desktop\Java HW\book_market)
2021-04-22 06:58:06.199  INFO 2532 --- [main] r.g.book.market.BookMarketApplication    : No active profile set, falling back to default profiles: default
2021-04-22 06:58:06.528  INFO 2532 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2021-04-22 06:58:06.528  INFO 2532 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2021-04-22 06:58:06.794  INFO 2532 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8189 (http)
2021-04-22 06:58:06.794  INFO 2532 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2021-04-22 06:58:06.794  INFO 2532 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.45]
2021-04-22 06:58:06.872  INFO 2532 --- [main] o.a.c.c.C.[.[localhost].[/book_market]   : Initializing Spring embedded WebApplicationContext
2021-04-22 06:58:06.872  INFO 2532 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 639 ms
2021-04-22 06:58:06.929  INFO 2532 --- [main] o.f.c.internal.license.VersionPrinter    : Flyway Community Edition 7.1.1 by Redgate
2021-04-22 06:58:06.944  INFO 2532 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2021-04-22 06:58:06.991  INFO 2532 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2021-04-22 06:58:07.007  INFO 2532 --- [main] o.f.c.i.database.base.DatabaseType       : Database: jdbc:postgresql://localhost:5432/db_book_market (PostgreSQL 13.2)
2021-04-22 06:58:07.038  INFO 2532 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 3 migrations (execution time 00:00.016s)
2021-04-22 06:58:07.038  INFO 2532 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema "book_market": 1
2021-04-22 06:58:07.054  INFO 2532 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "book_market" to version "2 - init"
2021-04-22 06:58:07.054  INFO 2532 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: удаление распространяется на ещё 3 объекта
2021-04-22 06:58:07.069  INFO 2532 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: удаление распространяется на ещё 2 объекта
2021-04-22 06:58:07.085 ERROR 2532 --- [main] o.f.core.internal.command.DbMigrate      : Migration of schema "book_market" to version "2 - init" failed! Changes successfully rolled back.
2021-04-22 06:58:07.085  WARN 2532 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V2__init.sql failed
-----------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: ошибка синтаксиса (примерное положение: ")")
  Позиция: 412
Location   : db/migration/V2__init.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V2__init.sql)
Line       : 11
Statement  : create table users(
                      id bigserial primary key,
                      first_name varchar(255) not null,
                      last_name varchar(255) not null,
                      login varchar(255) not null,
                      password varchar(255) not null,
                      address bigint references address(id) not null,
                      phone_number varchar(255),
)

2021-04-22 06:58:07.085  INFO 2532 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2021-04-22 06:58:07.085  INFO 2532 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2021-04-22 06:58:07.085  INFO 2532 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2021-04-22 06:58:07.085  INFO 2532 --- [main] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2021-04-22 06:58:07.100 ERROR 2532 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V2__init.sql failed
-----------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: ошибка синтаксиса (примерное положение: ")")
  Позиция: 412
Location   : db/migration/V2__init.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V2__init.sql)
Line       : 11
Statement  : create table users(
                      id bigserial primary key,
                      first_name varchar(255) not null,
                      last_name varchar(255) not null,
                      login varchar(255) not null,
                      password varchar(255) not null,
                      address bigint references address(id) not null,
                      phone_number varchar(255),
)

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:602) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:524) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-5.3.6.jar:5.3.6]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908) ~[spring-context-5.3.6.jar:5.3.6]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.6.jar:5.3.6]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:144) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:782) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:774) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:339) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1340) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1329) ~[spring-boot-2.4.5.jar:2.4.5]
	at ru.geekbrains.book.market.BookMarketApplication.main(BookMarketApplication.java:10) ~[classes/:na]
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V2__init.sql failed
-----------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: ошибка синтаксиса (примерное положение: ")")
  Позиция: 412
Location   : db/migration/V2__init.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V2__init.sql)
Line       : 11
Statement  : create table users(
                      id bigserial primary key,
                      first_name varchar(255) not null,
                      last_name varchar(255) not null,
                      login varchar(255) not null,
                      password varchar(255) not null,
                      address bigint references address(id) not null,
                      phone_number varchar(255),
)

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:438) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.access$200(DbMigrate.java:56) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate$3.call(DbMigrate.java:341) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:66) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:338) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:303) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.access$100(DbMigrate.java:56) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate$2.call(DbMigrate.java:207) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate$2.call(DbMigrate.java:204) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:73) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLConnection.lock(PostgreSQLConnection.java:99) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:139) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:204) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:165) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway$1.execute(Flyway.java:215) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway$1.execute(Flyway.java:164) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway.execute(Flyway.java:538) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway.migrate(Flyway.java:164) ~[flyway-core-7.1.1.jar:na]
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66) ~[spring-boot-autoconfigure-2.4.5.jar:2.4.5]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1845) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-5.3.6.jar:5.3.6]
	... 19 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: 
Migration V2__init.sql failed
-----------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: ошибка синтаксиса (примерное положение: ")")
  Позиция: 412
Location   : db/migration/V2__init.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V2__init.sql)
Line       : 11
Statement  : create table users(
                      id bigserial primary key,
                      first_name varchar(255) not null,
                      last_name varchar(255) not null,
                      login varchar(255) not null,
                      password varchar(255) not null,
                      address bigint references address(id) not null,
                      phone_number varchar(255),
)

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:273) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:218) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:82) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.access$000(SqlMigrationExecutor.java:32) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor$1.call(SqlMigrationExecutor.java:70) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor$1.call(SqlMigrationExecutor.java:67) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:28) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:67) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:434) ~[flyway-core-7.1.1.jar:na]
	... 39 common frames omitted
Caused by: org.postgresql.util.PSQLException: ОШИБКА: ошибка синтаксиса (примерное положение: ")")
  Позиция: 412
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2553) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2285) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:323) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:481) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:401) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:322) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:308) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:284) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:279) ~[postgresql-42.2.19.jar:42.2.19]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95) ~[HikariCP-3.4.5.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-3.4.5.jar:na]
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:241) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:111) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:206) ~[flyway-core-7.1.1.jar:na]
	... 47 common frames omitted

2021-04-22 06:58:16.968  INFO 11024 --- [main] r.g.book.market.BookMarketApplication    : Starting BookMarketApplication using Java 15.0.1 on PC with PID 11024 (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes started by Андрей in C:\Users\Андрей\Desktop\Java HW\book_market)
2021-04-22 06:58:16.983  INFO 11024 --- [main] r.g.book.market.BookMarketApplication    : No active profile set, falling back to default profiles: default
2021-04-22 06:58:17.297  INFO 11024 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2021-04-22 06:58:17.297  INFO 11024 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2021-04-22 06:58:17.556  INFO 11024 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8189 (http)
2021-04-22 06:58:17.572  INFO 11024 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2021-04-22 06:58:17.572  INFO 11024 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.45]
2021-04-22 06:58:17.634  INFO 11024 --- [main] o.a.c.c.C.[.[localhost].[/book_market]   : Initializing Spring embedded WebApplicationContext
2021-04-22 06:58:17.634  INFO 11024 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 627 ms
2021-04-22 06:58:17.697  INFO 11024 --- [main] o.f.c.internal.license.VersionPrinter    : Flyway Community Edition 7.1.1 by Redgate
2021-04-22 06:58:17.713  INFO 11024 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2021-04-22 06:58:17.760  INFO 11024 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2021-04-22 06:58:17.775  INFO 11024 --- [main] o.f.c.i.database.base.DatabaseType       : Database: jdbc:postgresql://localhost:5432/db_book_market (PostgreSQL 13.2)
2021-04-22 06:58:17.807  INFO 11024 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 3 migrations (execution time 00:00.016s)
2021-04-22 06:58:17.807  INFO 11024 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema "book_market": 1
2021-04-22 06:58:17.822  INFO 11024 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "book_market" to version "2 - init"
2021-04-22 06:58:17.822  INFO 11024 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: удаление распространяется на ещё 3 объекта
2021-04-22 06:58:17.838  INFO 11024 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: удаление распространяется на ещё 2 объекта
2021-04-22 06:58:17.869 ERROR 11024 --- [main] o.f.core.internal.command.DbMigrate      : Migration of schema "book_market" to version "2 - init" failed! Changes successfully rolled back.
2021-04-22 06:58:17.869  WARN 11024 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V2__init.sql failed
-----------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: ошибка синтаксиса (примерное положение: "1")
  Позиция: 24
Location   : db/migration/V2__init.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V2__init.sql)
Line       : 108
Statement  : INSERT INTO users_role(1, 2)

2021-04-22 06:58:17.869  INFO 11024 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2021-04-22 06:58:17.869  INFO 11024 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2021-04-22 06:58:17.869  INFO 11024 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2021-04-22 06:58:17.869  INFO 11024 --- [main] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2021-04-22 06:58:17.885 ERROR 11024 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V2__init.sql failed
-----------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: ошибка синтаксиса (примерное положение: "1")
  Позиция: 24
Location   : db/migration/V2__init.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V2__init.sql)
Line       : 108
Statement  : INSERT INTO users_role(1, 2)

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:602) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:524) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-5.3.6.jar:5.3.6]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908) ~[spring-context-5.3.6.jar:5.3.6]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.6.jar:5.3.6]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:144) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:782) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:774) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:339) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1340) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1329) ~[spring-boot-2.4.5.jar:2.4.5]
	at ru.geekbrains.book.market.BookMarketApplication.main(BookMarketApplication.java:10) ~[classes/:na]
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V2__init.sql failed
-----------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: ошибка синтаксиса (примерное положение: "1")
  Позиция: 24
Location   : db/migration/V2__init.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V2__init.sql)
Line       : 108
Statement  : INSERT INTO users_role(1, 2)

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:438) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.access$200(DbMigrate.java:56) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate$3.call(DbMigrate.java:341) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:66) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:338) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:303) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.access$100(DbMigrate.java:56) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate$2.call(DbMigrate.java:207) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate$2.call(DbMigrate.java:204) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:73) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLConnection.lock(PostgreSQLConnection.java:99) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:139) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:204) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:165) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway$1.execute(Flyway.java:215) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway$1.execute(Flyway.java:164) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway.execute(Flyway.java:538) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway.migrate(Flyway.java:164) ~[flyway-core-7.1.1.jar:na]
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66) ~[spring-boot-autoconfigure-2.4.5.jar:2.4.5]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1845) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-5.3.6.jar:5.3.6]
	... 19 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: 
Migration V2__init.sql failed
-----------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: ошибка синтаксиса (примерное положение: "1")
  Позиция: 24
Location   : db/migration/V2__init.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V2__init.sql)
Line       : 108
Statement  : INSERT INTO users_role(1, 2)

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:273) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:218) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:82) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.access$000(SqlMigrationExecutor.java:32) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor$1.call(SqlMigrationExecutor.java:70) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor$1.call(SqlMigrationExecutor.java:67) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:28) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:67) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:434) ~[flyway-core-7.1.1.jar:na]
	... 39 common frames omitted
Caused by: org.postgresql.util.PSQLException: ОШИБКА: ошибка синтаксиса (примерное положение: "1")
  Позиция: 24
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2553) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2285) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:323) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:481) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:401) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:322) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:308) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:284) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:279) ~[postgresql-42.2.19.jar:42.2.19]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95) ~[HikariCP-3.4.5.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-3.4.5.jar:na]
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:241) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:111) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:206) ~[flyway-core-7.1.1.jar:na]
	... 47 common frames omitted

2021-04-22 07:05:11.790  INFO 12628 --- [main] r.g.book.market.BookMarketApplication    : Starting BookMarketApplication using Java 15.0.1 on PC with PID 12628 (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes started by Андрей in C:\Users\Андрей\Desktop\Java HW\book_market)
2021-04-22 07:05:11.790  INFO 12628 --- [main] r.g.book.market.BookMarketApplication    : No active profile set, falling back to default profiles: default
2021-04-22 07:05:12.115  INFO 12628 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2021-04-22 07:05:12.115  INFO 12628 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2021-04-22 07:05:12.386  INFO 12628 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8189 (http)
2021-04-22 07:05:12.386  INFO 12628 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2021-04-22 07:05:12.386  INFO 12628 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.45]
2021-04-22 07:05:12.464  INFO 12628 --- [main] o.a.c.c.C.[.[localhost].[/book_market]   : Initializing Spring embedded WebApplicationContext
2021-04-22 07:05:12.464  INFO 12628 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 638 ms
2021-04-22 07:05:12.521  INFO 12628 --- [main] o.f.c.internal.license.VersionPrinter    : Flyway Community Edition 7.1.1 by Redgate
2021-04-22 07:05:12.537  INFO 12628 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2021-04-22 07:05:12.584  INFO 12628 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2021-04-22 07:05:12.599  INFO 12628 --- [main] o.f.c.i.database.base.DatabaseType       : Database: jdbc:postgresql://localhost:5432/db_book_market (PostgreSQL 13.2)
2021-04-22 07:05:12.631  INFO 12628 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 3 migrations (execution time 00:00.017s)
2021-04-22 07:05:12.631  INFO 12628 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema "book_market": 1
2021-04-22 07:05:12.646  INFO 12628 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "book_market" to version "2 - init"
2021-04-22 07:05:12.646  INFO 12628 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: удаление распространяется на ещё 3 объекта
2021-04-22 07:05:12.662  INFO 12628 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: удаление распространяется на ещё 2 объекта
2021-04-22 07:05:12.693 ERROR 12628 --- [main] o.f.core.internal.command.DbMigrate      : Migration of schema "book_market" to version "2 - init" failed! Changes successfully rolled back.
2021-04-22 07:05:12.693  WARN 12628 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V2__init.sql failed
-----------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: INSERT содержит больше выражений, чем целевых столбцов
  Позиция: 35
Location   : db/migration/V2__init.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V2__init.sql)
Line       : 163
Statement  : INSERT INTO storage VALUES (1, 1, 100)

2021-04-22 07:05:12.693  INFO 12628 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2021-04-22 07:05:12.693  INFO 12628 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2021-04-22 07:05:12.693  INFO 12628 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2021-04-22 07:05:12.709  INFO 12628 --- [main] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2021-04-22 07:05:12.724 ERROR 12628 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V2__init.sql failed
-----------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: INSERT содержит больше выражений, чем целевых столбцов
  Позиция: 35
Location   : db/migration/V2__init.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V2__init.sql)
Line       : 163
Statement  : INSERT INTO storage VALUES (1, 1, 100)

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:602) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:524) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-5.3.6.jar:5.3.6]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908) ~[spring-context-5.3.6.jar:5.3.6]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.6.jar:5.3.6]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:144) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:782) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:774) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:339) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1340) ~[spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1329) ~[spring-boot-2.4.5.jar:2.4.5]
	at ru.geekbrains.book.market.BookMarketApplication.main(BookMarketApplication.java:10) ~[classes/:na]
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V2__init.sql failed
-----------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: INSERT содержит больше выражений, чем целевых столбцов
  Позиция: 35
Location   : db/migration/V2__init.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V2__init.sql)
Line       : 163
Statement  : INSERT INTO storage VALUES (1, 1, 100)

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:438) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.access$200(DbMigrate.java:56) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate$3.call(DbMigrate.java:341) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:66) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:338) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:303) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.access$100(DbMigrate.java:56) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate$2.call(DbMigrate.java:207) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate$2.call(DbMigrate.java:204) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:73) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLConnection.lock(PostgreSQLConnection.java:99) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:139) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:204) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:165) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway$1.execute(Flyway.java:215) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway$1.execute(Flyway.java:164) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway.execute(Flyway.java:538) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.Flyway.migrate(Flyway.java:164) ~[flyway-core-7.1.1.jar:na]
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66) ~[spring-boot-autoconfigure-2.4.5.jar:2.4.5]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1845) ~[spring-beans-5.3.6.jar:5.3.6]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-5.3.6.jar:5.3.6]
	... 19 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: 
Migration V2__init.sql failed
-----------------------------
SQL State  : 42601
Error Code : 0
Message    : ОШИБКА: INSERT содержит больше выражений, чем целевых столбцов
  Позиция: 35
Location   : db/migration/V2__init.sql (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes\db\migration\V2__init.sql)
Line       : 163
Statement  : INSERT INTO storage VALUES (1, 1, 100)

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:273) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:218) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:82) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.access$000(SqlMigrationExecutor.java:32) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor$1.call(SqlMigrationExecutor.java:70) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor$1.call(SqlMigrationExecutor.java:67) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:28) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:67) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:434) ~[flyway-core-7.1.1.jar:na]
	... 39 common frames omitted
Caused by: org.postgresql.util.PSQLException: ОШИБКА: INSERT содержит больше выражений, чем целевых столбцов
  Позиция: 35
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2553) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2285) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:323) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:481) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:401) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:322) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:308) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:284) ~[postgresql-42.2.19.jar:42.2.19]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:279) ~[postgresql-42.2.19.jar:42.2.19]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95) ~[HikariCP-3.4.5.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-3.4.5.jar:na]
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:241) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:111) ~[flyway-core-7.1.1.jar:na]
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:206) ~[flyway-core-7.1.1.jar:na]
	... 47 common frames omitted

2021-04-22 07:06:25.518  INFO 9068 --- [main] r.g.book.market.BookMarketApplication    : Starting BookMarketApplication using Java 15.0.1 on PC with PID 9068 (C:\Users\Андрей\Desktop\Java HW\book_market\target\classes started by Андрей in C:\Users\Андрей\Desktop\Java HW\book_market)
2021-04-22 07:06:25.518  INFO 9068 --- [main] r.g.book.market.BookMarketApplication    : No active profile set, falling back to default profiles: default
2021-04-22 07:06:25.830  INFO 9068 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2021-04-22 07:06:25.846  INFO 9068 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 2 ms. Found 0 JPA repository interfaces.
2021-04-22 07:06:26.096  INFO 9068 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8189 (http)
2021-04-22 07:06:26.112  INFO 9068 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2021-04-22 07:06:26.112  INFO 9068 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.45]
2021-04-22 07:06:26.174  INFO 9068 --- [main] o.a.c.c.C.[.[localhost].[/book_market]   : Initializing Spring embedded WebApplicationContext
2021-04-22 07:06:26.174  INFO 9068 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 634 ms
2021-04-22 07:06:26.252  INFO 9068 --- [main] o.f.c.internal.license.VersionPrinter    : Flyway Community Edition 7.1.1 by Redgate
2021-04-22 07:06:26.252  INFO 9068 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2021-04-22 07:06:26.299  INFO 9068 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2021-04-22 07:06:26.315  INFO 9068 --- [main] o.f.c.i.database.base.DatabaseType       : Database: jdbc:postgresql://localhost:5432/db_book_market (PostgreSQL 13.2)
2021-04-22 07:06:26.346  INFO 9068 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 3 migrations (execution time 00:00.017s)
2021-04-22 07:06:26.346  INFO 9068 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema "book_market": 1
2021-04-22 07:06:26.362  INFO 9068 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "book_market" to version "2 - init"
2021-04-22 07:06:26.362  INFO 9068 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: удаление распространяется на ещё 3 объекта
2021-04-22 07:06:26.377  INFO 9068 --- [main] o.f.c.i.s.DefaultSqlScriptExecutor       : DB: удаление распространяется на ещё 2 объекта
2021-04-22 07:06:26.424  INFO 9068 --- [main] o.f.core.internal.command.DbMigrate      : Successfully applied 1 migration to schema "book_market" (execution time 00:00.079s)
2021-04-22 07:06:26.469  INFO 9068 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2021-04-22 07:06:26.501  INFO 9068 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.4.30.Final
2021-04-22 07:06:26.563  INFO 9068 --- [main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2021-04-22 07:06:26.610  INFO 9068 --- [main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL94Dialect
2021-04-22 07:06:26.672  INFO 9068 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2021-04-22 07:06:26.688  INFO 9068 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2021-04-22 07:06:26.704  WARN 9068 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2021-04-22 07:06:26.766  INFO 9068 --- [main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'
2021-04-22 07:06:26.860  INFO 9068 --- [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: fa4229aa-b34c-4eb5-adf6-5703620f030d

2021-04-22 07:06:26.907  INFO 9068 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@478530cb, org.springframework.security.web.context.SecurityContextPersistenceFilter@69a73867, org.springframework.security.web.header.HeaderWriterFilter@21abda60, org.springframework.security.web.csrf.CsrfFilter@485c84d7, org.springframework.security.web.authentication.logout.LogoutFilter@18bb1b88, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@4d2f9e3c, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@51b51641, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@5be7b749, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@3c346c45, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1d3a03fe, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@d76099a, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@44aeae34, org.springframework.security.web.session.SessionManagementFilter@6c70b7c3, org.springframework.security.web.access.ExceptionTranslationFilter@794cb26b, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@29c244e]
2021-04-22 07:06:26.954  INFO 9068 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8189 (http) with context path '/book_market'
2021-04-22 07:06:26.969  INFO 9068 --- [main] r.g.book.market.BookMarketApplication    : Started BookMarketApplication in 1.671 seconds (JVM running for 2.027)

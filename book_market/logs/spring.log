04-05-2021 12:04:13.944 [main] INFO  r.g.b.market.BookMarketApplication.logStarting - Starting BookMarketApplication using Java 11 on PC with PID 15824 (D:\2021\Java\book-market\book_market\target\classes started by Андрей in D:\2021\Java\book-market\book_market)
04-05-2021 12:04:13.944 [main] INFO  r.g.b.market.BookMarketApplication.logStartupProfileInfo - No active profile set, falling back to default profiles: default
04-05-2021 12:04:14.541 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext.refresh - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.support.BeanDefinitionOverrideException: Invalid bean definition with name 'cartItemRepository' defined in ru.geekbrains.book.market.repositories.CartItemRepository defined in @EnableRedisRepositories declared on RedisRepositoriesRegistrar.EnableRedisRepositoriesConfiguration: Cannot register bean definition [Root bean: class [org.springframework.data.redis.repository.support.RedisRepositoryFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in ru.geekbrains.book.market.repositories.CartItemRepository defined in @EnableRedisRepositories declared on RedisRepositoriesRegistrar.EnableRedisRepositoriesConfiguration] for bean 'cartItemRepository': There is already [Root bean: class [org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in ru.geekbrains.book.market.repositories.CartItemRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration] bound.
04-05-2021 12:04:14.541 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLoggingListener.logMessage - 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
04-05-2021 12:04:14.557 [main] ERROR o.s.b.d.LoggingFailureAnalysisReporter.report - 

***************************
APPLICATION FAILED TO START
***************************

Description:

The bean 'cartItemRepository', defined in ru.geekbrains.book.market.repositories.CartItemRepository defined in @EnableRedisRepositories declared on RedisRepositoriesRegistrar.EnableRedisRepositoriesConfiguration, could not be registered. A bean with that name has already been defined in ru.geekbrains.book.market.repositories.CartItemRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration and overriding is disabled.

Action:

Consider renaming one of the beans or enabling overriding by setting spring.main.allow-bean-definition-overriding=true

04-05-2021 12:05:44.783 [main] INFO  r.g.b.market.BookMarketApplication.logStarting - Starting BookMarketApplication using Java 11 on PC with PID 10648 (D:\2021\Java\book-market\book_market\target\classes started by Андрей in D:\2021\Java\book-market\book_market)
04-05-2021 12:05:44.798 [main] INFO  r.g.b.market.BookMarketApplication.logStartupProfileInfo - No active profile set, falling back to default profiles: default
04-05-2021 12:05:45.304 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext.refresh - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.support.BeanDefinitionOverrideException: Invalid bean definition with name 'cartItemRepository' defined in ru.geekbrains.book.market.repositories.CartItemRepository defined in @EnableRedisRepositories declared on RedisRepositoriesRegistrar.EnableRedisRepositoriesConfiguration: Cannot register bean definition [Root bean: class [org.springframework.data.redis.repository.support.RedisRepositoryFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in ru.geekbrains.book.market.repositories.CartItemRepository defined in @EnableRedisRepositories declared on RedisRepositoriesRegistrar.EnableRedisRepositoriesConfiguration] for bean 'cartItemRepository': There is already [Root bean: class [org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in ru.geekbrains.book.market.repositories.CartItemRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration] bound.
04-05-2021 12:05:45.310 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLoggingListener.logMessage - 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
04-05-2021 12:05:45.317 [main] ERROR o.s.b.d.LoggingFailureAnalysisReporter.report - 

***************************
APPLICATION FAILED TO START
***************************

Description:

The bean 'cartItemRepository', defined in ru.geekbrains.book.market.repositories.CartItemRepository defined in @EnableRedisRepositories declared on RedisRepositoriesRegistrar.EnableRedisRepositoriesConfiguration, could not be registered. A bean with that name has already been defined in ru.geekbrains.book.market.repositories.CartItemRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration and overriding is disabled.

Action:

Consider renaming one of the beans or enabling overriding by setting spring.main.allow-bean-definition-overriding=true

04-05-2021 12:08:12.568 [main] INFO  r.g.b.market.BookMarketApplication.logStarting - Starting BookMarketApplication using Java 11 on PC with PID 9872 (D:\2021\Java\book-market\book_market\target\classes started by Андрей in D:\2021\Java\book-market\book_market)
04-05-2021 12:08:12.568 [main] INFO  r.g.b.market.BookMarketApplication.logStartupProfileInfo - No active profile set, falling back to default profiles: default
04-05-2021 12:08:13.068 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext.refresh - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.support.BeanDefinitionOverrideException: Invalid bean definition with name 'cartRepository' defined in ru.geekbrains.book.market.repositories.CartRepository defined in @EnableRedisRepositories declared on RedisRepositoriesRegistrar.EnableRedisRepositoriesConfiguration: Cannot register bean definition [Root bean: class [org.springframework.data.redis.repository.support.RedisRepositoryFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in ru.geekbrains.book.market.repositories.CartRepository defined in @EnableRedisRepositories declared on RedisRepositoriesRegistrar.EnableRedisRepositoriesConfiguration] for bean 'cartRepository': There is already [Root bean: class [org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in ru.geekbrains.book.market.repositories.CartRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration] bound.
04-05-2021 12:08:13.068 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLoggingListener.logMessage - 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
04-05-2021 12:08:13.068 [main] ERROR o.s.b.d.LoggingFailureAnalysisReporter.report - 

***************************
APPLICATION FAILED TO START
***************************

Description:

The bean 'cartRepository', defined in ru.geekbrains.book.market.repositories.CartRepository defined in @EnableRedisRepositories declared on RedisRepositoriesRegistrar.EnableRedisRepositoriesConfiguration, could not be registered. A bean with that name has already been defined in ru.geekbrains.book.market.repositories.CartRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration and overriding is disabled.

Action:

Consider renaming one of the beans or enabling overriding by setting spring.main.allow-bean-definition-overriding=true

04-05-2021 12:08:41.426 [main] INFO  r.g.b.market.BookMarketApplication.logStarting - Starting BookMarketApplication using Java 11 on PC with PID 5984 (D:\2021\Java\book-market\book_market\target\classes started by Андрей in D:\2021\Java\book-market\book_market)
04-05-2021 12:08:41.426 [main] INFO  r.g.b.market.BookMarketApplication.logStartupProfileInfo - No active profile set, falling back to default profiles: default
04-05-2021 12:08:42.241 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port(s): 8189 (http)
04-05-2021 12:08:42.262 [main] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
04-05-2021 12:08:42.262 [main] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/9.0.45]
04-05-2021 12:08:42.343 [main] INFO  o.a.c.c.C.[.[.[/book_market].log - Initializing Spring embedded WebApplicationContext
04-05-2021 12:08:42.343 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 884 ms
04-05-2021 12:08:42.428 [main] INFO  o.f.c.i.license.VersionPrinter.info - Flyway Community Edition 7.8.1 by Redgate
04-05-2021 12:08:42.432 [main] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Starting...
04-05-2021 12:08:42.520 [main] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Start completed.
04-05-2021 12:08:42.550 [main] INFO  o.f.c.i.database.base.DatabaseType.info - Database: jdbc:postgresql://localhost:5432/db_book_market (PostgreSQL 13.2)
04-05-2021 12:08:42.620 [main] INFO  o.f.core.internal.command.DbValidate.info - Successfully validated 13 migrations (execution time 00:00.043s)
04-05-2021 12:08:42.620 [main] INFO  o.f.core.internal.command.DbMigrate.info - Current version of schema "book_market": 13
04-05-2021 12:08:42.620 [main] INFO  o.f.core.internal.command.DbMigrate.info - Schema "book_market" is up to date. No migration necessary.
04-05-2021 12:08:42.698 [main] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
04-05-2021 12:08:42.729 [main] INFO  org.hibernate.Version.logVersion - HHH000412: Hibernate ORM core version 5.4.30.Final
04-05-2021 12:08:42.839 [main] INFO  o.h.annotations.common.Version.<clinit> - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
04-05-2021 12:08:42.901 [main] INFO  org.hibernate.dialect.Dialect.<init> - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL94Dialect
04-05-2021 12:08:43.182 [main] INFO  org.hibernate.tuple.PojoInstantiator.<init> - HHH000182: No default (no-argument) constructor for class: ru.geekbrains.book.market.entities.OrderItem (class must be instantiated by Interceptor)
04-05-2021 12:08:43.274 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
04-05-2021 12:08:43.279 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
04-05-2021 12:08:43.306 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
04-05-2021 12:08:43.769 [main] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@496c6d94, org.springframework.security.web.context.SecurityContextPersistenceFilter@51d9479c, org.springframework.security.web.header.HeaderWriterFilter@49c6ee4a, org.springframework.security.web.authentication.logout.LogoutFilter@750b200b, ru.geekbrains.book.market.beans.JwtRequestFilter@2a8a3ada, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@13346a64, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@56ed2baf, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@360d3f47, org.springframework.security.web.session.SessionManagementFilter@3e0b1f03, org.springframework.security.web.access.ExceptionTranslationFilter@21084a6d, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@3d00e981]
04-05-2021 12:08:43.832 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor.initialize - Initializing ExecutorService 'applicationTaskExecutor'
04-05-2021 12:08:43.847 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter.initControllerAdviceCache - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
04-05-2021 12:08:43.884 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping.handlerMethodsInitialized - 12 mappings in 'requestMappingHandlerMapping'
04-05-2021 12:08:43.915 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping.logMappings - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
04-05-2021 12:08:43.915 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
04-05-2021 12:08:43.993 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port(s): 8189 (http) with context path '/book_market'
04-05-2021 12:08:43.993 [main] INFO  r.g.b.market.BookMarketApplication.logStarted - Started BookMarketApplication in 2.821 seconds (JVM running for 3.518)
04-05-2021 12:11:43.794 [http-nio-8189-exec-2] INFO  o.a.c.c.C.[.[.[/book_market].log - Initializing Spring DispatcherServlet 'dispatcherServlet'
04-05-2021 12:11:43.794 [http-nio-8189-exec-2] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Initializing Servlet 'dispatcherServlet'
04-05-2021 12:11:43.795 [http-nio-8189-exec-2] DEBUG o.s.web.servlet.DispatcherServlet.initMultipartResolver - Detected StandardServletMultipartResolver
04-05-2021 12:11:43.795 [http-nio-8189-exec-2] DEBUG o.s.web.servlet.DispatcherServlet.initLocaleResolver - Detected AcceptHeaderLocaleResolver
04-05-2021 12:11:43.795 [http-nio-8189-exec-2] DEBUG o.s.web.servlet.DispatcherServlet.initThemeResolver - Detected FixedThemeResolver
04-05-2021 12:11:43.796 [http-nio-8189-exec-2] DEBUG o.s.web.servlet.DispatcherServlet.initRequestToViewNameTranslator - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@3a6409ec
04-05-2021 12:11:43.796 [http-nio-8189-exec-2] DEBUG o.s.web.servlet.DispatcherServlet.initFlashMapManager - Detected org.springframework.web.servlet.support.SessionFlashMapManager@29ddaa8e
04-05-2021 12:11:43.796 [http-nio-8189-exec-2] DEBUG o.s.web.servlet.DispatcherServlet.initServletBean - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
04-05-2021 12:11:43.796 [http-nio-8189-exec-2] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Completed initialization in 1 ms
04-05-2021 12:11:43.809 [http-nio-8189-exec-2] DEBUG o.s.web.servlet.DispatcherServlet.traceDebug - GET "/book_market/auth", parameters={}
04-05-2021 12:11:43.814 [http-nio-8189-exec-2] WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver.logException - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'GET' not supported]
04-05-2021 12:11:43.815 [http-nio-8189-exec-2] DEBUG o.s.web.servlet.DispatcherServlet.logResult - Completed 405 METHOD_NOT_ALLOWED
04-05-2021 12:11:43.817 [http-nio-8189-exec-2] DEBUG o.s.web.servlet.DispatcherServlet.traceDebug - "ERROR" dispatch for GET "/book_market/error", parameters={}
04-05-2021 12:11:43.819 [http-nio-8189-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping.getHandler - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
04-05-2021 12:11:43.839 [http-nio-8189-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor.writeWithMessageConverters - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/json, application/*+json]
04-05-2021 12:11:43.839 [http-nio-8189-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor.traceDebug - Writing [{timestamp=Tue May 04 12:11:43 MSK 2021, status=405, error=Method Not Allowed, message=, path=/book_ (truncated)...]
04-05-2021 12:11:43.867 [http-nio-8189-exec-2] DEBUG o.s.web.servlet.DispatcherServlet.logResult - Exiting from "ERROR" dispatch, status 405
04-05-2021 12:12:20.663 [http-nio-8189-exec-3] DEBUG o.s.web.servlet.DispatcherServlet.traceDebug - GET "/book_market/auth", parameters={}
04-05-2021 12:12:20.664 [http-nio-8189-exec-3] WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver.logException - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'GET' not supported]
04-05-2021 12:12:20.664 [http-nio-8189-exec-3] DEBUG o.s.web.servlet.DispatcherServlet.logResult - Completed 405 METHOD_NOT_ALLOWED
04-05-2021 12:12:20.665 [http-nio-8189-exec-3] DEBUG o.s.web.servlet.DispatcherServlet.traceDebug - "ERROR" dispatch for GET "/book_market/error", parameters={}
04-05-2021 12:12:20.665 [http-nio-8189-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping.getHandler - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
04-05-2021 12:12:20.666 [http-nio-8189-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor.writeWithMessageConverters - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/json, application/*+json]
04-05-2021 12:12:20.666 [http-nio-8189-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor.traceDebug - Writing [{timestamp=Tue May 04 12:12:20 MSK 2021, status=405, error=Method Not Allowed, message=, path=/book_ (truncated)...]
04-05-2021 12:12:20.667 [http-nio-8189-exec-3] DEBUG o.s.web.servlet.DispatcherServlet.logResult - Exiting from "ERROR" dispatch, status 405
04-05-2021 12:14:17.878 [http-nio-8189-exec-5] DEBUG o.s.web.servlet.DispatcherServlet.traceDebug - POST "/book_market/auth", parameters={}
04-05-2021 12:14:17.879 [http-nio-8189-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping.getHandler - Mapped to ru.geekbrains.book.market.controllers.AuthController#createToken(JwtRequest)
04-05-2021 12:14:17.901 [http-nio-8189-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor.traceDebug - Read "application/json;charset=UTF-8" to [JwtRequest(username=ivanov_sergey@mail.com, password=manager1)]
04-05-2021 12:14:18.212 [http-nio-8189-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor.writeWithMessageConverters - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/json, application/*+json]
04-05-2021 12:14:18.213 [http-nio-8189-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor.traceDebug - Writing [JwtResponse(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJpdmFub3Zfc2VyZ2V5QG1haWwuY29tIiwicm9sZXMiOlsiUk9MR (truncated)...]
04-05-2021 12:14:18.214 [http-nio-8189-exec-5] DEBUG o.s.web.servlet.DispatcherServlet.logResult - Completed 200 OK
04-05-2021 12:16:27.582 [http-nio-8189-exec-9] DEBUG o.s.web.servlet.DispatcherServlet.traceDebug - GET "/book_market/api/v1/cart", parameters={}
04-05-2021 12:16:27.583 [http-nio-8189-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping.getHandler - Mapped to ru.geekbrains.book.market.controllers.CartController#getCurrentCart(Principal)
04-05-2021 12:16:28.224 [http-nio-8189-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor.writeWithMessageConverters - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/json, application/*+json]
04-05-2021 12:16:28.227 [http-nio-8189-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor.traceDebug - Writing [Cart(ownerId=1, cartItems=null, price=null)]
04-05-2021 12:16:28.228 [http-nio-8189-exec-9] DEBUG o.s.web.servlet.DispatcherServlet.logResult - Completed 200 OK
04-05-2021 12:19:02.657 [http-nio-8189-exec-2] DEBUG o.s.web.servlet.DispatcherServlet.traceDebug - GET "/book_market/api/v1/cart/mock", parameters={}
04-05-2021 12:19:02.658 [http-nio-8189-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping.getHandler - Mapped to ru.geekbrains.book.market.controllers.CartController#getMockCart(Principal)
04-05-2021 12:19:02.672 [http-nio-8189-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor.writeWithMessageConverters - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/json, application/*+json]
04-05-2021 12:19:02.700 [http-nio-8189-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor.traceDebug - Writing [Cart(ownerId=1, cartItems=[CartItem(id=null, cart=null, book=Book(bookId=1, bookTitle=Мрачный залив, (truncated)...]
04-05-2021 12:19:02.708 [http-nio-8189-exec-2] DEBUG o.s.web.servlet.DispatcherServlet.logResult - Completed 200 OK
04-05-2021 12:19:30.000 [http-nio-8189-exec-3] DEBUG o.s.web.servlet.DispatcherServlet.traceDebug - GET "/book_market/api/v1/cart/cart", parameters={}
04-05-2021 12:19:30.001 [http-nio-8189-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping.getHandler - Mapped to ResourceHttpRequestHandler [Classpath [META-INF/resources/], Classpath [resources/], Classpath [static/], Classpath [public/], ServletContext [/]]
04-05-2021 12:19:30.003 [http-nio-8189-exec-3] DEBUG o.s.w.s.r.ResourceHttpRequestHandler.handleRequest - Resource not found
04-05-2021 12:19:30.004 [http-nio-8189-exec-3] DEBUG o.s.web.servlet.DispatcherServlet.logResult - Completed 404 NOT_FOUND
04-05-2021 12:19:30.004 [http-nio-8189-exec-3] DEBUG o.s.web.servlet.DispatcherServlet.traceDebug - "ERROR" dispatch for GET "/book_market/error", parameters={}
04-05-2021 12:19:30.005 [http-nio-8189-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping.getHandler - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
04-05-2021 12:19:30.005 [http-nio-8189-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor.writeWithMessageConverters - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/json, application/*+json]
04-05-2021 12:19:30.006 [http-nio-8189-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor.traceDebug - Writing [{timestamp=Tue May 04 12:19:30 MSK 2021, status=404, error=Not Found, message=, path=/book_market/ap (truncated)...]
04-05-2021 12:19:30.007 [http-nio-8189-exec-3] DEBUG o.s.web.servlet.DispatcherServlet.logResult - Exiting from "ERROR" dispatch, status 404
04-05-2021 12:19:34.725 [http-nio-8189-exec-4] DEBUG o.s.web.servlet.DispatcherServlet.traceDebug - GET "/book_market/api/v1/cart/", parameters={}
04-05-2021 12:19:34.726 [http-nio-8189-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping.getHandler - Mapped to ru.geekbrains.book.market.controllers.CartController#getCurrentCart(Principal)
04-05-2021 12:19:34.730 [http-nio-8189-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor.writeWithMessageConverters - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/json, application/*+json]
04-05-2021 12:19:34.730 [http-nio-8189-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor.traceDebug - Writing [Cart(ownerId=1, cartItems=null, price=null)]
04-05-2021 12:19:34.731 [http-nio-8189-exec-4] DEBUG o.s.web.servlet.DispatcherServlet.logResult - Completed 200 OK
04-05-2021 12:46:26.661 [main] INFO  r.g.b.market.BookMarketApplication.logStarting - Starting BookMarketApplication using Java 11 on PC with PID 3152 (D:\2021\Java\book-market\book_market\target\classes started by Андрей in D:\2021\Java\book-market\book_market)
04-05-2021 12:46:26.661 [main] INFO  r.g.b.market.BookMarketApplication.logStartupProfileInfo - No active profile set, falling back to default profiles: default
04-05-2021 12:46:27.455 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port(s): 8189 (http)
04-05-2021 12:46:27.455 [main] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
04-05-2021 12:46:27.455 [main] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/9.0.45]
04-05-2021 12:46:27.517 [main] INFO  o.a.c.c.C.[.[.[/book_market].log - Initializing Spring embedded WebApplicationContext
04-05-2021 12:46:27.517 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 840 ms
04-05-2021 12:46:27.580 [main] INFO  o.f.c.i.license.VersionPrinter.info - Flyway Community Edition 7.8.1 by Redgate
04-05-2021 12:46:27.595 [main] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Starting...
04-05-2021 12:46:27.642 [main] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Start completed.
04-05-2021 12:46:27.658 [main] INFO  o.f.c.i.database.base.DatabaseType.info - Database: jdbc:postgresql://localhost:5432/db_book_market (PostgreSQL 13.2)
04-05-2021 12:46:27.689 [main] INFO  o.f.core.internal.command.DbValidate.info - Successfully validated 14 migrations (execution time 00:00.017s)
04-05-2021 12:46:27.689 [main] INFO  o.f.core.internal.command.DbMigrate.info - Current version of schema "book_market": 13
04-05-2021 12:46:27.830 [main] INFO  o.f.core.internal.command.DbMigrate.info - Migrating schema "book_market" to version "14 - create table cart"
04-05-2021 12:46:27.906 [main] ERROR o.f.core.internal.command.DbMigrate.error - Migration of schema "book_market" to version "14 - create table cart" failed! Changes successfully rolled back.
04-05-2021 12:46:27.906 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext.refresh - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V14__create_table_cart.sql failed
-------------------------------------------
SQL State  : 42804
Error Code : 0
Message    : ОШИБКА: ограничение внешнего ключа "cart_items_cart_id_fkey" нельзя реализовать
  Подробности: Столбцы ключа "cart_id" и "id" имеют несовместимые типы: bigint и uuid.
Location   : db/migration/V14__create_table_cart.sql (D:\2021\Java\book-market\book_market\target\classes\db\migration\V14__create_table_cart.sql)
Line       : 8
Statement  : create table cart_items
 (
     id                bigserial primary key,
     cart_id           bigint references carts(id),
     product_id        bigint references products(id),
     title             varchar(255),
     quantity          int,
     price_per_product numeric(10, 2),
     price             numeric(10, 2),
     created_at        timestamp default current_timestamp,
     updated_at        timestamp default current_timestamp
 )

04-05-2021 12:46:27.906 [main] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown initiated...
04-05-2021 12:46:27.922 [main] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown completed.
04-05-2021 12:46:27.922 [main] INFO  o.a.catalina.core.StandardService.log - Stopping service [Tomcat]
04-05-2021 12:46:27.938 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLoggingListener.logMessage - 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
04-05-2021 12:46:27.938 [main] ERROR o.s.boot.SpringApplication.reportFailure - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V14__create_table_cart.sql failed
-------------------------------------------
SQL State  : 42804
Error Code : 0
Message    : ОШИБКА: ограничение внешнего ключа "cart_items_cart_id_fkey" нельзя реализовать
  Подробности: Столбцы ключа "cart_id" и "id" имеют несовместимые типы: bigint и uuid.
Location   : db/migration/V14__create_table_cart.sql (D:\2021\Java\book-market\book_market\target\classes\db\migration\V14__create_table_cart.sql)
Line       : 8
Statement  : create table cart_items
 (
     id                bigserial primary key,
     cart_id           bigint references carts(id),
     product_id        bigint references products(id),
     title             varchar(255),
     quantity          int,
     price_per_product numeric(10, 2),
     price             numeric(10, 2),
     created_at        timestamp default current_timestamp,
     updated_at        timestamp default current_timestamp
 )

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:602)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:524)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:144)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:782)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:774)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:339)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1340)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1329)
	at ru.geekbrains.book.market.BookMarketApplication.main(BookMarketApplication.java:10)
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V14__create_table_cart.sql failed
-------------------------------------------
SQL State  : 42804
Error Code : 0
Message    : ОШИБКА: ограничение внешнего ключа "cart_items_cart_id_fkey" нельзя реализовать
  Подробности: Столбцы ключа "cart_id" и "id" имеют несовместимые типы: bigint и uuid.
Location   : db/migration/V14__create_table_cart.sql (D:\2021\Java\book-market\book_market\target\classes\db\migration\V14__create_table_cart.sql)
Line       : 8
Statement  : create table cart_items
 (
     id                bigserial primary key,
     cart_id           bigint references carts(id),
     product_id        bigint references products(id),
     title             varchar(255),
     quantity          int,
     price_per_product numeric(10, 2),
     price             numeric(10, 2),
     created_at        timestamp default current_timestamp,
     updated_at        timestamp default current_timestamp
 )

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:357)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:262)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:66)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:261)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:234)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:140)
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:69)
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLConnection.lock(PostgreSQLConnection.java:99)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:140)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:100)
	at org.flywaydb.core.Flyway$1.execute(Flyway.java:216)
	at org.flywaydb.core.Flyway$1.execute(Flyway.java:165)
	at org.flywaydb.core.Flyway.execute(Flyway.java:571)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:165)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1845)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	... 19 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: 
Migration V14__create_table_cart.sql failed
-------------------------------------------
SQL State  : 42804
Error Code : 0
Message    : ОШИБКА: ограничение внешнего ключа "cart_items_cart_id_fkey" нельзя реализовать
  Подробности: Столбцы ключа "cart_id" и "id" имеют несовместимые типы: bigint и uuid.
Location   : db/migration/V14__create_table_cart.sql (D:\2021\Java\book-market\book_market\target\classes\db\migration\V14__create_table_cart.sql)
Line       : 8
Statement  : create table cart_items
 (
     id                bigserial primary key,
     cart_id           bigint references carts(id),
     product_id        bigint references products(id),
     title             varchar(255),
     quantity          int,
     price_per_product numeric(10, 2),
     price             numeric(10, 2),
     created_at        timestamp default current_timestamp,
     updated_at        timestamp default current_timestamp
 )

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:218)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:78)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:67)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:66)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:354)
	... 36 common frames omitted
Caused by: org.postgresql.util.PSQLException: ОШИБКА: ограничение внешнего ключа "cart_items_cart_id_fkey" нельзя реализовать
  Подробности: Столбцы ключа "cart_id" и "id" имеют несовместимые типы: bigint и uuid.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2553)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2285)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:323)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:481)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:401)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:322)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:308)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:284)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:279)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:241)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:111)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:206)
	... 42 common frames omitted
04-05-2021 12:48:16.315 [main] INFO  r.g.b.market.BookMarketApplication.logStarting - Starting BookMarketApplication using Java 11 on PC with PID 2892 (D:\2021\Java\book-market\book_market\target\classes started by Андрей in D:\2021\Java\book-market\book_market)
04-05-2021 12:48:16.319 [main] INFO  r.g.b.market.BookMarketApplication.logStartupProfileInfo - No active profile set, falling back to default profiles: default
04-05-2021 12:48:17.105 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port(s): 8189 (http)
04-05-2021 12:48:17.105 [main] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
04-05-2021 12:48:17.105 [main] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/9.0.45]
04-05-2021 12:48:17.183 [main] INFO  o.a.c.c.C.[.[.[/book_market].log - Initializing Spring embedded WebApplicationContext
04-05-2021 12:48:17.183 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 839 ms
04-05-2021 12:48:17.246 [main] INFO  o.f.c.i.license.VersionPrinter.info - Flyway Community Edition 7.8.1 by Redgate
04-05-2021 12:48:17.262 [main] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Starting...
04-05-2021 12:48:17.320 [main] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Start completed.
04-05-2021 12:48:17.323 [main] INFO  o.f.c.i.database.base.DatabaseType.info - Database: jdbc:postgresql://localhost:5432/db_book_market (PostgreSQL 13.2)
04-05-2021 12:48:17.355 [main] INFO  o.f.core.internal.command.DbValidate.info - Successfully validated 14 migrations (execution time 00:00.017s)
04-05-2021 12:48:17.355 [main] INFO  o.f.core.internal.command.DbMigrate.info - Current version of schema "book_market": 13
04-05-2021 12:48:17.355 [main] INFO  o.f.core.internal.command.DbMigrate.info - Migrating schema "book_market" to version "14 - create table cart"
04-05-2021 12:48:17.386 [main] ERROR o.f.core.internal.command.DbMigrate.error - Migration of schema "book_market" to version "14 - create table cart" failed! Changes successfully rolled back.
04-05-2021 12:48:17.386 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext.refresh - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V14__create_table_cart.sql failed
-------------------------------------------
SQL State  : 42P01
Error Code : 0
Message    : ОШИБКА: отношение "products" не существует
Location   : db/migration/V14__create_table_cart.sql (D:\2021\Java\book-market\book_market\target\classes\db\migration\V14__create_table_cart.sql)
Line       : 8
Statement  : create table cart_items
 (
     id                bigserial primary key,
     cart_id           bigint references carts(id),
     product_id        bigint references products(id),
     title             varchar(255),
     quantity          int,
     price_per_product int,
     price             int,
     created_at        timestamp default current_timestamp,
     updated_at        timestamp default current_timestamp
 )

04-05-2021 12:48:17.386 [main] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown initiated...
04-05-2021 12:48:17.386 [main] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown completed.
04-05-2021 12:48:17.401 [main] INFO  o.a.catalina.core.StandardService.log - Stopping service [Tomcat]
04-05-2021 12:48:17.401 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLoggingListener.logMessage - 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
04-05-2021 12:48:17.417 [main] ERROR o.s.boot.SpringApplication.reportFailure - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V14__create_table_cart.sql failed
-------------------------------------------
SQL State  : 42P01
Error Code : 0
Message    : ОШИБКА: отношение "products" не существует
Location   : db/migration/V14__create_table_cart.sql (D:\2021\Java\book-market\book_market\target\classes\db\migration\V14__create_table_cart.sql)
Line       : 8
Statement  : create table cart_items
 (
     id                bigserial primary key,
     cart_id           bigint references carts(id),
     product_id        bigint references products(id),
     title             varchar(255),
     quantity          int,
     price_per_product int,
     price             int,
     created_at        timestamp default current_timestamp,
     updated_at        timestamp default current_timestamp
 )

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:602)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:524)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:144)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:782)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:774)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:339)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1340)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1329)
	at ru.geekbrains.book.market.BookMarketApplication.main(BookMarketApplication.java:10)
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: 
Migration V14__create_table_cart.sql failed
-------------------------------------------
SQL State  : 42P01
Error Code : 0
Message    : ОШИБКА: отношение "products" не существует
Location   : db/migration/V14__create_table_cart.sql (D:\2021\Java\book-market\book_market\target\classes\db\migration\V14__create_table_cart.sql)
Line       : 8
Statement  : create table cart_items
 (
     id                bigserial primary key,
     cart_id           bigint references carts(id),
     product_id        bigint references products(id),
     title             varchar(255),
     quantity          int,
     price_per_product int,
     price             int,
     created_at        timestamp default current_timestamp,
     updated_at        timestamp default current_timestamp
 )

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:357)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:262)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:66)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:261)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:234)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:140)
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:69)
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLConnection.lock(PostgreSQLConnection.java:99)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:140)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:100)
	at org.flywaydb.core.Flyway$1.execute(Flyway.java:216)
	at org.flywaydb.core.Flyway$1.execute(Flyway.java:165)
	at org.flywaydb.core.Flyway.execute(Flyway.java:571)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:165)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1845)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	... 19 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: 
Migration V14__create_table_cart.sql failed
-------------------------------------------
SQL State  : 42P01
Error Code : 0
Message    : ОШИБКА: отношение "products" не существует
Location   : db/migration/V14__create_table_cart.sql (D:\2021\Java\book-market\book_market\target\classes\db\migration\V14__create_table_cart.sql)
Line       : 8
Statement  : create table cart_items
 (
     id                bigserial primary key,
     cart_id           bigint references carts(id),
     product_id        bigint references products(id),
     title             varchar(255),
     quantity          int,
     price_per_product int,
     price             int,
     created_at        timestamp default current_timestamp,
     updated_at        timestamp default current_timestamp
 )

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:218)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:78)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:67)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:66)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:354)
	... 36 common frames omitted
Caused by: org.postgresql.util.PSQLException: ОШИБКА: отношение "products" не существует
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2553)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2285)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:323)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:481)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:401)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:322)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:308)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:284)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:279)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:241)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:111)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:206)
	... 42 common frames omitted
04-05-2021 12:48:33.639 [main] INFO  r.g.b.market.BookMarketApplication.logStarting - Starting BookMarketApplication using Java 11 on PC with PID 7332 (D:\2021\Java\book-market\book_market\target\classes started by Андрей in D:\2021\Java\book-market\book_market)
04-05-2021 12:48:33.643 [main] INFO  r.g.b.market.BookMarketApplication.logStartupProfileInfo - No active profile set, falling back to default profiles: default
04-05-2021 12:48:34.423 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port(s): 8189 (http)
04-05-2021 12:48:34.429 [main] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
04-05-2021 12:48:34.429 [main] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/9.0.45]
04-05-2021 12:48:34.493 [main] INFO  o.a.c.c.C.[.[.[/book_market].log - Initializing Spring embedded WebApplicationContext
04-05-2021 12:48:34.493 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 825 ms
04-05-2021 12:48:34.566 [main] INFO  o.f.c.i.license.VersionPrinter.info - Flyway Community Edition 7.8.1 by Redgate
04-05-2021 12:48:34.569 [main] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Starting...
04-05-2021 12:48:34.628 [main] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Start completed.
04-05-2021 12:48:34.640 [main] INFO  o.f.c.i.database.base.DatabaseType.info - Database: jdbc:postgresql://localhost:5432/db_book_market (PostgreSQL 13.2)
04-05-2021 12:48:34.668 [main] INFO  o.f.core.internal.command.DbValidate.info - Successfully validated 14 migrations (execution time 00:00.018s)
04-05-2021 12:48:34.672 [main] INFO  o.f.core.internal.command.DbMigrate.info - Current version of schema "book_market": 13
04-05-2021 12:48:34.679 [main] INFO  o.f.core.internal.command.DbMigrate.info - Migrating schema "book_market" to version "14 - create table cart"
04-05-2021 12:48:34.702 [main] INFO  o.f.core.internal.command.DbMigrate.info - Successfully applied 1 migration to schema "book_market", now at version v14 (execution time 00:00.032s)
04-05-2021 12:48:34.754 [main] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
04-05-2021 12:48:34.778 [main] INFO  org.hibernate.Version.logVersion - HHH000412: Hibernate ORM core version 5.4.30.Final
04-05-2021 12:48:34.832 [main] INFO  o.h.annotations.common.Version.<clinit> - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
04-05-2021 12:48:34.881 [main] INFO  org.hibernate.dialect.Dialect.<init> - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL94Dialect
04-05-2021 12:48:35.090 [main] INFO  org.hibernate.tuple.PojoInstantiator.<init> - HHH000182: No default (no-argument) constructor for class: ru.geekbrains.book.market.entities.OrderItem (class must be instantiated by Interceptor)
04-05-2021 12:48:35.180 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
04-05-2021 12:48:35.185 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
04-05-2021 12:48:35.209 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
04-05-2021 12:48:35.644 [main] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3b850bb7, org.springframework.security.web.context.SecurityContextPersistenceFilter@5cea47a1, org.springframework.security.web.header.HeaderWriterFilter@1d4e06bb, org.springframework.security.web.authentication.logout.LogoutFilter@1c97c3bb, ru.geekbrains.book.market.beans.JwtRequestFilter@3c952a33, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@451cef67, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1f847d9e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6802c10e, org.springframework.security.web.session.SessionManagementFilter@10df1f34, org.springframework.security.web.access.ExceptionTranslationFilter@77aeba9b, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@21f0cc97]
04-05-2021 12:48:35.707 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor.initialize - Initializing ExecutorService 'applicationTaskExecutor'
04-05-2021 12:48:35.707 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter.initControllerAdviceCache - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
04-05-2021 12:48:35.738 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping.handlerMethodsInitialized - 12 mappings in 'requestMappingHandlerMapping'
04-05-2021 12:48:35.754 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping.logMappings - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
04-05-2021 12:48:35.769 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
04-05-2021 12:48:35.832 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port(s): 8189 (http) with context path '/book_market'
04-05-2021 12:48:35.832 [main] INFO  r.g.b.market.BookMarketApplication.logStarted - Started BookMarketApplication in 2.46 seconds (JVM running for 3.177)
04-05-2021 12:48:48.998 [http-nio-8189-exec-2] INFO  o.a.c.c.C.[.[.[/book_market].log - Initializing Spring DispatcherServlet 'dispatcherServlet'
04-05-2021 12:48:48.999 [http-nio-8189-exec-2] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Initializing Servlet 'dispatcherServlet'
04-05-2021 12:48:48.999 [http-nio-8189-exec-2] DEBUG o.s.web.servlet.DispatcherServlet.initMultipartResolver - Detected StandardServletMultipartResolver
04-05-2021 12:48:48.999 [http-nio-8189-exec-2] DEBUG o.s.web.servlet.DispatcherServlet.initLocaleResolver - Detected AcceptHeaderLocaleResolver
04-05-2021 12:48:48.999 [http-nio-8189-exec-2] DEBUG o.s.web.servlet.DispatcherServlet.initThemeResolver - Detected FixedThemeResolver
04-05-2021 12:48:49.000 [http-nio-8189-exec-2] DEBUG o.s.web.servlet.DispatcherServlet.initRequestToViewNameTranslator - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@474deb4c
04-05-2021 12:48:49.000 [http-nio-8189-exec-2] DEBUG o.s.web.servlet.DispatcherServlet.initFlashMapManager - Detected org.springframework.web.servlet.support.SessionFlashMapManager@7611e295
04-05-2021 12:48:49.001 [http-nio-8189-exec-2] DEBUG o.s.web.servlet.DispatcherServlet.initServletBean - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
04-05-2021 12:48:49.001 [http-nio-8189-exec-2] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Completed initialization in 2 ms
04-05-2021 12:48:49.059 [http-nio-8189-exec-2] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet].log - Servlet.service() for servlet [dispatcherServlet] in context with path [/book_market] threw exception
io.jsonwebtoken.ExpiredJwtException: JWT expired at 2021-05-04T12:44:18Z. Current time: 2021-05-04T12:48:49Z, a difference of 271054 milliseconds.  Allowed clock skew: 0 milliseconds.
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:385)
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:481)
	at io.jsonwebtoken.impl.DefaultJwtParser.parseClaimsJws(DefaultJwtParser.java:541)
	at ru.geekbrains.book.market.beans.JwtTokenUtil.getAllClaimsFromToken(JwtTokenUtil.java:60)
	at ru.geekbrains.book.market.beans.JwtTokenUtil.getClaimFromToken(JwtTokenUtil.java:52)
	at ru.geekbrains.book.market.beans.JwtTokenUtil.getUserLoginFromToken(JwtTokenUtil.java:44)
	at ru.geekbrains.book.market.beans.JwtRequestFilter.doFilterInternal(JwtRequestFilter.java:29)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
04-05-2021 12:48:49.065 [http-nio-8189-exec-2] DEBUG o.s.web.servlet.DispatcherServlet.traceDebug - "ERROR" dispatch for GET "/book_market/error", parameters={}
04-05-2021 12:48:49.069 [http-nio-8189-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping.getHandler - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
04-05-2021 12:48:49.084 [http-nio-8189-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor.writeWithMessageConverters - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/json, application/*+json]
04-05-2021 12:48:49.085 [http-nio-8189-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor.traceDebug - Writing [{timestamp=Tue May 04 12:48:49 MSK 2021, status=500, error=Internal Server Error, message=, path=/bo (truncated)...]
04-05-2021 12:48:49.106 [http-nio-8189-exec-2] DEBUG o.s.web.servlet.DispatcherServlet.logResult - Exiting from "ERROR" dispatch, status 500
04-05-2021 12:49:32.766 [http-nio-8189-exec-4] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet].log - Servlet.service() for servlet [dispatcherServlet] in context with path [/book_market] threw exception
io.jsonwebtoken.ExpiredJwtException: JWT expired at 2021-05-04T12:44:18Z. Current time: 2021-05-04T12:49:32Z, a difference of 314766 milliseconds.  Allowed clock skew: 0 milliseconds.
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:385)
	at io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:481)
	at io.jsonwebtoken.impl.DefaultJwtParser.parseClaimsJws(DefaultJwtParser.java:541)
	at ru.geekbrains.book.market.beans.JwtTokenUtil.getAllClaimsFromToken(JwtTokenUtil.java:60)
	at ru.geekbrains.book.market.beans.JwtTokenUtil.getClaimFromToken(JwtTokenUtil.java:52)
	at ru.geekbrains.book.market.beans.JwtTokenUtil.getUserLoginFromToken(JwtTokenUtil.java:44)
	at ru.geekbrains.book.market.beans.JwtRequestFilter.doFilterInternal(JwtRequestFilter.java:29)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
04-05-2021 12:49:32.767 [http-nio-8189-exec-4] DEBUG o.s.web.servlet.DispatcherServlet.traceDebug - "ERROR" dispatch for GET "/book_market/error", parameters={}
04-05-2021 12:49:32.768 [http-nio-8189-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping.getHandler - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
04-05-2021 12:49:32.768 [http-nio-8189-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor.writeWithMessageConverters - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/json, application/*+json]
04-05-2021 12:49:32.769 [http-nio-8189-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor.traceDebug - Writing [{timestamp=Tue May 04 12:49:32 MSK 2021, status=500, error=Internal Server Error, message=, path=/bo (truncated)...]
04-05-2021 12:49:32.770 [http-nio-8189-exec-4] DEBUG o.s.web.servlet.DispatcherServlet.logResult - Exiting from "ERROR" dispatch, status 500
04-05-2021 12:50:14.515 [main] INFO  r.g.b.market.BookMarketApplication.logStarting - Starting BookMarketApplication using Java 11 on PC with PID 2344 (D:\2021\Java\book-market\book_market\target\classes started by Андрей in D:\2021\Java\book-market\book_market)
04-05-2021 12:50:14.517 [main] INFO  r.g.b.market.BookMarketApplication.logStartupProfileInfo - No active profile set, falling back to default profiles: default
04-05-2021 12:50:15.296 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port(s): 8189 (http)
04-05-2021 12:50:15.302 [main] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
04-05-2021 12:50:15.302 [main] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/9.0.45]
04-05-2021 12:50:15.375 [main] INFO  o.a.c.c.C.[.[.[/book_market].log - Initializing Spring embedded WebApplicationContext
04-05-2021 12:50:15.376 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 834 ms
04-05-2021 12:50:15.448 [main] INFO  o.f.c.i.license.VersionPrinter.info - Flyway Community Edition 7.8.1 by Redgate
04-05-2021 12:50:15.452 [main] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Starting...
04-05-2021 12:50:15.511 [main] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Start completed.
04-05-2021 12:50:15.523 [main] INFO  o.f.c.i.database.base.DatabaseType.info - Database: jdbc:postgresql://localhost:5432/db_book_market (PostgreSQL 13.2)
04-05-2021 12:50:15.550 [main] INFO  o.f.core.internal.command.DbValidate.info - Successfully validated 14 migrations (execution time 00:00.017s)
04-05-2021 12:50:15.553 [main] INFO  o.f.core.internal.command.DbMigrate.info - Current version of schema "book_market": 14
04-05-2021 12:50:15.554 [main] INFO  o.f.core.internal.command.DbMigrate.info - Schema "book_market" is up to date. No migration necessary.
04-05-2021 12:50:15.598 [main] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
04-05-2021 12:50:15.629 [main] INFO  org.hibernate.Version.logVersion - HHH000412: Hibernate ORM core version 5.4.30.Final
04-05-2021 12:50:15.676 [main] INFO  o.h.annotations.common.Version.<clinit> - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
04-05-2021 12:50:15.723 [main] INFO  org.hibernate.dialect.Dialect.<init> - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL94Dialect
04-05-2021 12:50:15.926 [main] INFO  org.hibernate.tuple.PojoInstantiator.<init> - HHH000182: No default (no-argument) constructor for class: ru.geekbrains.book.market.entities.OrderItem (class must be instantiated by Interceptor)
04-05-2021 12:50:16.019 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
04-05-2021 12:50:16.019 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
04-05-2021 12:50:16.051 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
04-05-2021 12:50:16.485 [main] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4a977146, org.springframework.security.web.context.SecurityContextPersistenceFilter@4549d616, org.springframework.security.web.header.HeaderWriterFilter@669469c9, org.springframework.security.web.authentication.logout.LogoutFilter@6e069ca9, ru.geekbrains.book.market.beans.JwtRequestFilter@76d7881e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@65b1693c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3e0b1f03, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@41dc34c8, org.springframework.security.web.session.SessionManagementFilter@49c6ee4a, org.springframework.security.web.access.ExceptionTranslationFilter@357e7113, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@6fe77a97]
04-05-2021 12:50:16.548 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor.initialize - Initializing ExecutorService 'applicationTaskExecutor'
04-05-2021 12:50:16.548 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter.initControllerAdviceCache - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
04-05-2021 12:50:16.579 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping.handlerMethodsInitialized - 12 mappings in 'requestMappingHandlerMapping'
04-05-2021 12:50:16.595 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping.logMappings - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
04-05-2021 12:50:16.595 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
04-05-2021 12:50:16.673 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port(s): 8189 (http) with context path '/book_market'
04-05-2021 12:50:16.673 [main] INFO  r.g.b.market.BookMarketApplication.logStarted - Started BookMarketApplication in 2.432 seconds (JVM running for 3.116)
04-05-2021 12:50:23.360 [http-nio-8189-exec-1] INFO  o.a.c.c.C.[.[.[/book_market].log - Initializing Spring DispatcherServlet 'dispatcherServlet'
04-05-2021 12:50:23.361 [http-nio-8189-exec-1] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Initializing Servlet 'dispatcherServlet'
04-05-2021 12:50:23.361 [http-nio-8189-exec-1] DEBUG o.s.web.servlet.DispatcherServlet.initMultipartResolver - Detected StandardServletMultipartResolver
04-05-2021 12:50:23.361 [http-nio-8189-exec-1] DEBUG o.s.web.servlet.DispatcherServlet.initLocaleResolver - Detected AcceptHeaderLocaleResolver
04-05-2021 12:50:23.361 [http-nio-8189-exec-1] DEBUG o.s.web.servlet.DispatcherServlet.initThemeResolver - Detected FixedThemeResolver
04-05-2021 12:50:23.362 [http-nio-8189-exec-1] DEBUG o.s.web.servlet.DispatcherServlet.initRequestToViewNameTranslator - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@6a906078
04-05-2021 12:50:23.362 [http-nio-8189-exec-1] DEBUG o.s.web.servlet.DispatcherServlet.initFlashMapManager - Detected org.springframework.web.servlet.support.SessionFlashMapManager@6413eeb7
04-05-2021 12:50:23.362 [http-nio-8189-exec-1] DEBUG o.s.web.servlet.DispatcherServlet.initServletBean - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
04-05-2021 12:50:23.362 [http-nio-8189-exec-1] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Completed initialization in 1 ms
04-05-2021 12:50:23.373 [http-nio-8189-exec-1] DEBUG o.s.web.servlet.DispatcherServlet.traceDebug - POST "/book_market/auth", parameters={}
04-05-2021 12:50:23.376 [http-nio-8189-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping.getHandler - Mapped to ru.geekbrains.book.market.controllers.AuthController#createToken(JwtRequest)
04-05-2021 12:50:23.418 [http-nio-8189-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor.traceDebug - Read "application/json;charset=UTF-8" to [JwtRequest(username=ivanov_sergey@mail.com, password=manager1)]
04-05-2021 12:50:23.702 [http-nio-8189-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor.writeWithMessageConverters - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/json, application/*+json]
04-05-2021 12:50:23.703 [http-nio-8189-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor.traceDebug - Writing [JwtResponse(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJpdmFub3Zfc2VyZ2V5QG1haWwuY29tIiwicm9sZXMiOlsiUk9MR (truncated)...]
04-05-2021 12:50:23.709 [http-nio-8189-exec-1] DEBUG o.s.web.servlet.DispatcherServlet.logResult - Completed 200 OK
04-05-2021 12:50:44.431 [http-nio-8189-exec-3] DEBUG o.s.web.servlet.DispatcherServlet.traceDebug - GET "/book_market/api/v1/cart/mock", parameters={}
04-05-2021 12:50:44.432 [http-nio-8189-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping.getHandler - Mapped to ru.geekbrains.book.market.controllers.CartController#getMockCart(Principal)
04-05-2021 12:50:44.447 [http-nio-8189-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor.writeWithMessageConverters - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/json, application/*+json]
04-05-2021 12:50:44.476 [http-nio-8189-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor.traceDebug - Writing [Cart(ownerId=1, cartItems=[CartItem(id=null, cart=null, book=Book(bookId=1, bookTitle=Мрачный залив, (truncated)...]
04-05-2021 12:50:44.483 [http-nio-8189-exec-3] DEBUG o.s.web.servlet.DispatcherServlet.logResult - Completed 200 OK
04-05-2021 12:51:01.538 [http-nio-8189-exec-4] DEBUG o.s.web.servlet.DispatcherServlet.traceDebug - GET "/book_market/api/v1/cart/", parameters={}
04-05-2021 12:51:01.538 [http-nio-8189-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping.getHandler - Mapped to ru.geekbrains.book.market.controllers.CartController#getCurrentCart(Principal)
04-05-2021 12:51:02.174 [http-nio-8189-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor.writeWithMessageConverters - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/json, application/*+json]
04-05-2021 12:51:02.175 [http-nio-8189-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor.traceDebug - Writing [Cart(ownerId=1, cartItems=null, price=null)]
04-05-2021 12:51:02.175 [http-nio-8189-exec-4] DEBUG o.s.web.servlet.DispatcherServlet.logResult - Completed 200 OK
04-05-2021 12:58:59.949 [main] INFO  r.g.b.market.BookMarketApplication.logStarting - Starting BookMarketApplication using Java 11 on PC with PID 1092 (D:\2021\Java\book-market\book_market\target\classes started by Андрей in D:\2021\Java\book-market\book_market)
04-05-2021 12:58:59.951 [main] INFO  r.g.b.market.BookMarketApplication.logStartupProfileInfo - No active profile set, falling back to default profiles: default
04-05-2021 12:59:00.825 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port(s): 8189 (http)
04-05-2021 12:59:00.830 [main] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
04-05-2021 12:59:00.830 [main] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/9.0.45]
04-05-2021 12:59:00.896 [main] INFO  o.a.c.c.C.[.[.[/book_market].log - Initializing Spring embedded WebApplicationContext
04-05-2021 12:59:00.897 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 917 ms
04-05-2021 12:59:01.011 [main] INFO  o.f.c.i.license.VersionPrinter.info - Flyway Community Edition 7.8.1 by Redgate
04-05-2021 12:59:01.015 [main] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Starting...
04-05-2021 12:59:01.080 [main] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Start completed.
04-05-2021 12:59:01.093 [main] INFO  o.f.c.i.database.base.DatabaseType.info - Database: jdbc:postgresql://localhost:5432/db_book_market (PostgreSQL 13.2)
04-05-2021 12:59:01.122 [main] INFO  o.f.core.internal.command.DbValidate.info - Successfully validated 14 migrations (execution time 00:00.018s)
04-05-2021 12:59:01.126 [main] INFO  o.f.core.internal.command.DbMigrate.info - Current version of schema "book_market": 14
04-05-2021 12:59:01.127 [main] INFO  o.f.core.internal.command.DbMigrate.info - Schema "book_market" is up to date. No migration necessary.
04-05-2021 12:59:01.183 [main] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
04-05-2021 12:59:01.208 [main] INFO  org.hibernate.Version.logVersion - HHH000412: Hibernate ORM core version 5.4.30.Final
04-05-2021 12:59:01.273 [main] INFO  o.h.annotations.common.Version.<clinit> - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
04-05-2021 12:59:01.341 [main] INFO  org.hibernate.dialect.Dialect.<init> - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL94Dialect
04-05-2021 12:59:01.602 [main] INFO  org.hibernate.tuple.PojoInstantiator.<init> - HHH000182: No default (no-argument) constructor for class: ru.geekbrains.book.market.entities.OrderItem (class must be instantiated by Interceptor)
04-05-2021 12:59:01.689 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
04-05-2021 12:59:01.695 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
04-05-2021 12:59:01.723 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
04-05-2021 12:59:02.244 [main] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@350d9d23, org.springframework.security.web.context.SecurityContextPersistenceFilter@7945986a, org.springframework.security.web.header.HeaderWriterFilter@436d2bb9, org.springframework.security.web.authentication.logout.LogoutFilter@5b4880b3, ru.geekbrains.book.market.beans.JwtRequestFilter@235c997d, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@aca2a0b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4936fbc6, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@530a46f4, org.springframework.security.web.session.SessionManagementFilter@62158618, org.springframework.security.web.access.ExceptionTranslationFilter@22ba30b0, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@16269ff4]
04-05-2021 12:59:02.306 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor.initialize - Initializing ExecutorService 'applicationTaskExecutor'
04-05-2021 12:59:02.314 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter.initControllerAdviceCache - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
04-05-2021 12:59:02.347 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping.handlerMethodsInitialized - 12 mappings in 'requestMappingHandlerMapping'
04-05-2021 12:59:02.365 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping.logMappings - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
04-05-2021 12:59:02.373 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
04-05-2021 12:59:02.448 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port(s): 8189 (http) with context path '/book_market'
04-05-2021 12:59:02.456 [main] INFO  r.g.b.market.BookMarketApplication.logStarted - Started BookMarketApplication in 2.777 seconds (JVM running for 4.052)
04-05-2021 12:59:59.865 [http-nio-8189-exec-1] INFO  o.a.c.c.C.[.[.[/book_market].log - Initializing Spring DispatcherServlet 'dispatcherServlet'
04-05-2021 12:59:59.866 [http-nio-8189-exec-1] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Initializing Servlet 'dispatcherServlet'
04-05-2021 12:59:59.866 [http-nio-8189-exec-1] DEBUG o.s.web.servlet.DispatcherServlet.initMultipartResolver - Detected StandardServletMultipartResolver
04-05-2021 12:59:59.866 [http-nio-8189-exec-1] DEBUG o.s.web.servlet.DispatcherServlet.initLocaleResolver - Detected AcceptHeaderLocaleResolver
04-05-2021 12:59:59.866 [http-nio-8189-exec-1] DEBUG o.s.web.servlet.DispatcherServlet.initThemeResolver - Detected FixedThemeResolver
04-05-2021 12:59:59.867 [http-nio-8189-exec-1] DEBUG o.s.web.servlet.DispatcherServlet.initRequestToViewNameTranslator - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@1b0fc8b
04-05-2021 12:59:59.867 [http-nio-8189-exec-1] DEBUG o.s.web.servlet.DispatcherServlet.initFlashMapManager - Detected org.springframework.web.servlet.support.SessionFlashMapManager@15ae31b
04-05-2021 12:59:59.867 [http-nio-8189-exec-1] DEBUG o.s.web.servlet.DispatcherServlet.initServletBean - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
04-05-2021 12:59:59.868 [http-nio-8189-exec-1] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Completed initialization in 2 ms
04-05-2021 13:00:05.437 [http-nio-8189-exec-1] DEBUG o.s.web.servlet.DispatcherServlet.traceDebug - GET "/book_market/api/v1/cart/mock", parameters={}
04-05-2021 13:00:05.440 [http-nio-8189-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping.getHandler - Mapped to ru.geekbrains.book.market.controllers.CartController#getMockCart(Principal)
04-05-2021 13:00:05.559 [http-nio-8189-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor.writeWithMessageConverters - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/json, application/*+json]
04-05-2021 13:00:05.595 [http-nio-8189-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor.traceDebug - Writing [Cart(ownerId=1, cartItems=[CartItem(id=null, cart=null, book=Book(bookId=1, bookTitle=Мрачный залив, (truncated)...]
04-05-2021 13:00:05.614 [http-nio-8189-exec-1] DEBUG o.s.web.servlet.DispatcherServlet.logResult - Completed 200 OK
04-05-2021 13:00:05.677 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor.shutdown - Shutting down ExecutorService 'applicationTaskExecutor'
04-05-2021 13:00:05.691 [SpringContextShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
04-05-2021 13:00:05.694 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown initiated...
04-05-2021 13:00:05.707 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown completed.
04-05-2021 13:00:08.702 [main] INFO  r.g.b.market.BookMarketApplication.logStarting - Starting BookMarketApplication using Java 11 on PC with PID 16028 (D:\2021\Java\book-market\book_market\target\classes started by Андрей in D:\2021\Java\book-market\book_market)
04-05-2021 13:00:08.702 [main] INFO  r.g.b.market.BookMarketApplication.logStartupProfileInfo - No active profile set, falling back to default profiles: default
04-05-2021 13:00:09.579 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port(s): 8189 (http)
04-05-2021 13:00:09.585 [main] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
04-05-2021 13:00:09.585 [main] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/9.0.45]
04-05-2021 13:00:09.663 [main] INFO  o.a.c.c.C.[.[.[/book_market].log - Initializing Spring embedded WebApplicationContext
04-05-2021 13:00:09.664 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 947 ms
04-05-2021 13:00:09.751 [main] INFO  o.f.c.i.license.VersionPrinter.info - Flyway Community Edition 7.8.1 by Redgate
04-05-2021 13:00:09.755 [main] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Starting...
04-05-2021 13:00:09.820 [main] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Start completed.
04-05-2021 13:00:09.834 [main] INFO  o.f.c.i.database.base.DatabaseType.info - Database: jdbc:postgresql://localhost:5432/db_book_market (PostgreSQL 13.2)
04-05-2021 13:00:09.863 [main] INFO  o.f.core.internal.command.DbValidate.info - Successfully validated 14 migrations (execution time 00:00.018s)
04-05-2021 13:00:09.867 [main] INFO  o.f.core.internal.command.DbMigrate.info - Current version of schema "book_market": 14
04-05-2021 13:00:09.868 [main] INFO  o.f.core.internal.command.DbMigrate.info - Schema "book_market" is up to date. No migration necessary.
04-05-2021 13:00:09.925 [main] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
04-05-2021 13:00:09.951 [main] INFO  org.hibernate.Version.logVersion - HHH000412: Hibernate ORM core version 5.4.30.Final
04-05-2021 13:00:10.015 [main] INFO  o.h.annotations.common.Version.<clinit> - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
04-05-2021 13:00:10.075 [main] INFO  org.hibernate.dialect.Dialect.<init> - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL94Dialect
04-05-2021 13:00:10.320 [main] INFO  org.hibernate.tuple.PojoInstantiator.<init> - HHH000182: No default (no-argument) constructor for class: ru.geekbrains.book.market.entities.OrderItem (class must be instantiated by Interceptor)
04-05-2021 13:00:10.412 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
04-05-2021 13:00:10.418 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
04-05-2021 13:00:10.448 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
04-05-2021 13:00:10.969 [main] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3fc2a1d1, org.springframework.security.web.context.SecurityContextPersistenceFilter@436d2bb9, org.springframework.security.web.header.HeaderWriterFilter@6cd65042, org.springframework.security.web.authentication.logout.LogoutFilter@291522f1, ru.geekbrains.book.market.beans.JwtRequestFilter@44286963, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@20276412, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3006aef5, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@752e4223, org.springframework.security.web.session.SessionManagementFilter@20608ef4, org.springframework.security.web.access.ExceptionTranslationFilter@7da9b32c, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@12948e7a]
04-05-2021 13:00:11.031 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor.initialize - Initializing ExecutorService 'applicationTaskExecutor'
04-05-2021 13:00:11.039 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter.initControllerAdviceCache - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
04-05-2021 13:00:11.072 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping.handlerMethodsInitialized - 12 mappings in 'requestMappingHandlerMapping'
04-05-2021 13:00:11.090 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping.logMappings - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
04-05-2021 13:00:11.096 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
04-05-2021 13:00:11.167 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port(s): 8189 (http) with context path '/book_market'
04-05-2021 13:00:11.176 [main] INFO  r.g.b.market.BookMarketApplication.logStarted - Started BookMarketApplication in 2.772 seconds (JVM running for 3.553)
04-05-2021 13:00:15.760 [http-nio-8189-exec-1] INFO  o.a.c.c.C.[.[.[/book_market].log - Initializing Spring DispatcherServlet 'dispatcherServlet'
04-05-2021 13:00:15.761 [http-nio-8189-exec-1] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Initializing Servlet 'dispatcherServlet'
04-05-2021 13:00:15.761 [http-nio-8189-exec-1] DEBUG o.s.web.servlet.DispatcherServlet.initMultipartResolver - Detected StandardServletMultipartResolver
04-05-2021 13:00:15.761 [http-nio-8189-exec-1] DEBUG o.s.web.servlet.DispatcherServlet.initLocaleResolver - Detected AcceptHeaderLocaleResolver
04-05-2021 13:00:15.762 [http-nio-8189-exec-1] DEBUG o.s.web.servlet.DispatcherServlet.initThemeResolver - Detected FixedThemeResolver
04-05-2021 13:00:15.762 [http-nio-8189-exec-1] DEBUG o.s.web.servlet.DispatcherServlet.initRequestToViewNameTranslator - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@7e484bd
04-05-2021 13:00:15.762 [http-nio-8189-exec-1] DEBUG o.s.web.servlet.DispatcherServlet.initFlashMapManager - Detected org.springframework.web.servlet.support.SessionFlashMapManager@58cd6088
04-05-2021 13:00:15.763 [http-nio-8189-exec-1] DEBUG o.s.web.servlet.DispatcherServlet.initServletBean - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
04-05-2021 13:00:15.763 [http-nio-8189-exec-1] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Completed initialization in 2 ms
04-05-2021 13:00:15.827 [http-nio-8189-exec-1] DEBUG o.s.web.servlet.DispatcherServlet.traceDebug - GET "/book_market/api/v1/cart/mock", parameters={}
04-05-2021 13:00:15.829 [http-nio-8189-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping.getHandler - Mapped to ru.geekbrains.book.market.controllers.CartController#getMockCart(Principal)
04-05-2021 13:02:23.046 [HikariPool-1 housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool.run - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=2m13s125ms555µs500ns).
04-05-2021 13:02:59.081 [http-nio-8189-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor.writeWithMessageConverters - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/json, application/*+json]
04-05-2021 13:02:59.081 [http-nio-8189-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor.traceDebug - Writing [Cart(ownerId=1, cartItems=[CartItem(id=null, cart=null, book=Book(bookId=1, bookTitle=Мрачный залив, (truncated)...]
04-05-2021 13:02:59.112 [http-nio-8189-exec-1] DEBUG o.s.web.servlet.DispatcherServlet.logResult - Completed 200 OK
04-05-2021 13:02:59.347 [SpringContextShutdownHook] INFO  o.s.s.c.ThreadPoolTaskExecutor.shutdown - Shutting down ExecutorService 'applicationTaskExecutor'
04-05-2021 13:02:59.362 [SpringContextShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.destroy - Closing JPA EntityManagerFactory for persistence unit 'default'
04-05-2021 13:02:59.362 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown initiated...
04-05-2021 13:02:59.378 [SpringContextShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource.close - HikariPool-1 - Shutdown completed.
04-05-2021 13:03:03.083 [main] INFO  r.g.b.market.BookMarketApplication.logStarting - Starting BookMarketApplication using Java 11 on PC with PID 9596 (D:\2021\Java\book-market\book_market\target\classes started by Андрей in D:\2021\Java\book-market\book_market)
04-05-2021 13:03:03.083 [main] INFO  r.g.b.market.BookMarketApplication.logStartupProfileInfo - No active profile set, falling back to default profiles: default
04-05-2021 13:03:03.842 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port(s): 8189 (http)
04-05-2021 13:03:03.858 [main] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
04-05-2021 13:03:03.858 [main] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/9.0.45]
04-05-2021 13:03:03.920 [main] INFO  o.a.c.c.C.[.[.[/book_market].log - Initializing Spring embedded WebApplicationContext
04-05-2021 13:03:03.920 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext.prepareWebApplicationContext - Root WebApplicationContext: initialization completed in 821 ms
04-05-2021 13:03:03.983 [main] INFO  o.f.c.i.license.VersionPrinter.info - Flyway Community Edition 7.8.1 by Redgate
04-05-2021 13:03:03.983 [main] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Starting...
04-05-2021 13:03:04.045 [main] INFO  com.zaxxer.hikari.HikariDataSource.getConnection - HikariPool-1 - Start completed.
04-05-2021 13:03:04.061 [main] INFO  o.f.c.i.database.base.DatabaseType.info - Database: jdbc:postgresql://localhost:5432/db_book_market (PostgreSQL 13.2)
04-05-2021 13:03:04.092 [main] INFO  o.f.core.internal.command.DbValidate.info - Successfully validated 14 migrations (execution time 00:00.016s)
04-05-2021 13:03:04.092 [main] INFO  o.f.core.internal.command.DbMigrate.info - Current version of schema "book_market": 14
04-05-2021 13:03:04.092 [main] INFO  o.f.core.internal.command.DbMigrate.info - Schema "book_market" is up to date. No migration necessary.
04-05-2021 13:03:04.139 [main] INFO  o.h.jpa.internal.util.LogHelper.logPersistenceUnitInformation - HHH000204: Processing PersistenceUnitInfo [name: default]
04-05-2021 13:03:04.170 [main] INFO  org.hibernate.Version.logVersion - HHH000412: Hibernate ORM core version 5.4.30.Final
04-05-2021 13:03:04.217 [main] INFO  o.h.annotations.common.Version.<clinit> - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
04-05-2021 13:03:04.281 [main] INFO  org.hibernate.dialect.Dialect.<init> - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL94Dialect
04-05-2021 13:03:04.509 [main] INFO  org.hibernate.tuple.PojoInstantiator.<init> - HHH000182: No default (no-argument) constructor for class: ru.geekbrains.book.market.entities.OrderItem (class must be instantiated by Interceptor)
04-05-2021 13:03:04.589 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator.initiateService - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
04-05-2021 13:03:04.589 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean.buildNativeEntityManagerFactory - Initialized JPA EntityManagerFactory for persistence unit 'default'
04-05-2021 13:03:04.620 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration.openEntityManagerInViewInterceptor - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
04-05-2021 13:03:05.058 [main] INFO  o.s.s.web.DefaultSecurityFilterChain.<init> - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@496c6d94, org.springframework.security.web.context.SecurityContextPersistenceFilter@51d9479c, org.springframework.security.web.header.HeaderWriterFilter@49c6ee4a, org.springframework.security.web.authentication.logout.LogoutFilter@750b200b, ru.geekbrains.book.market.beans.JwtRequestFilter@2a8a3ada, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@13346a64, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@56ed2baf, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@360d3f47, org.springframework.security.web.session.SessionManagementFilter@3e0b1f03, org.springframework.security.web.access.ExceptionTranslationFilter@21084a6d, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@3d00e981]
04-05-2021 13:03:05.107 [main] INFO  o.s.s.c.ThreadPoolTaskExecutor.initialize - Initializing ExecutorService 'applicationTaskExecutor'
04-05-2021 13:03:05.117 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter.initControllerAdviceCache - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
04-05-2021 13:03:05.148 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping.handlerMethodsInitialized - 12 mappings in 'requestMappingHandlerMapping'
04-05-2021 13:03:05.164 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping.logMappings - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
04-05-2021 13:03:05.164 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
04-05-2021 13:03:05.226 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port(s): 8189 (http) with context path '/book_market'
04-05-2021 13:03:05.242 [main] INFO  r.g.b.market.BookMarketApplication.logStarted - Started BookMarketApplication in 2.401 seconds (JVM running for 3.112)
04-05-2021 13:03:16.177 [http-nio-8189-exec-2] INFO  o.a.c.c.C.[.[.[/book_market].log - Initializing Spring DispatcherServlet 'dispatcherServlet'
04-05-2021 13:03:16.178 [http-nio-8189-exec-2] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Initializing Servlet 'dispatcherServlet'
04-05-2021 13:03:16.178 [http-nio-8189-exec-2] DEBUG o.s.web.servlet.DispatcherServlet.initMultipartResolver - Detected StandardServletMultipartResolver
04-05-2021 13:03:16.178 [http-nio-8189-exec-2] DEBUG o.s.web.servlet.DispatcherServlet.initLocaleResolver - Detected AcceptHeaderLocaleResolver
04-05-2021 13:03:16.178 [http-nio-8189-exec-2] DEBUG o.s.web.servlet.DispatcherServlet.initThemeResolver - Detected FixedThemeResolver
04-05-2021 13:03:16.179 [http-nio-8189-exec-2] DEBUG o.s.web.servlet.DispatcherServlet.initRequestToViewNameTranslator - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@3a6409ec
04-05-2021 13:03:16.179 [http-nio-8189-exec-2] DEBUG o.s.web.servlet.DispatcherServlet.initFlashMapManager - Detected org.springframework.web.servlet.support.SessionFlashMapManager@29ddaa8e
04-05-2021 13:03:16.179 [http-nio-8189-exec-2] DEBUG o.s.web.servlet.DispatcherServlet.initServletBean - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
04-05-2021 13:03:16.180 [http-nio-8189-exec-2] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Completed initialization in 2 ms
04-05-2021 13:03:16.237 [http-nio-8189-exec-2] DEBUG o.s.web.servlet.DispatcherServlet.traceDebug - GET "/book_market/api/v1/cart/mock", parameters={}
04-05-2021 13:03:16.240 [http-nio-8189-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping.getHandler - Mapped to ru.geekbrains.book.market.controllers.CartController#getMockCart(Principal)
04-05-2021 13:03:16.349 [http-nio-8189-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor.writeWithMessageConverters - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/json, application/*+json]
04-05-2021 13:03:16.383 [http-nio-8189-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor.traceDebug - Writing [Cart(ownerId=1, cartItems=[CartItem(id=null, cart=null, book=Book(bookId=1, bookTitle=Мрачный залив, (truncated)...]
04-05-2021 13:03:16.401 [http-nio-8189-exec-2] DEBUG o.s.web.servlet.DispatcherServlet.logResult - Completed 200 OK
04-05-2021 13:05:04.284 [http-nio-8189-exec-5] DEBUG o.s.web.servlet.DispatcherServlet.traceDebug - GET "/book_market/api/v1/cart", parameters={}
04-05-2021 13:05:04.285 [http-nio-8189-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping.getHandler - Mapped to ru.geekbrains.book.market.controllers.CartController#getCurrentCart(Principal)
04-05-2021 13:05:04.915 [http-nio-8189-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor.writeWithMessageConverters - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/json, application/*+json]
04-05-2021 13:05:04.915 [http-nio-8189-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor.traceDebug - Writing [Cart(ownerId=1, cartItems=null, price=null)]
04-05-2021 13:05:04.916 [http-nio-8189-exec-5] DEBUG o.s.web.servlet.DispatcherServlet.logResult - Completed 200 OK
